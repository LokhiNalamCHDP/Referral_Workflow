function vp(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function wp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ed={exports:{}},lo={},Cd={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $s=Symbol.for("react.element"),_p=Symbol.for("react.portal"),kp=Symbol.for("react.fragment"),xp=Symbol.for("react.strict_mode"),Sp=Symbol.for("react.profiler"),bp=Symbol.for("react.provider"),Ep=Symbol.for("react.context"),Cp=Symbol.for("react.forward_ref"),Rp=Symbol.for("react.suspense"),Pp=Symbol.for("react.memo"),Tp=Symbol.for("react.lazy"),Nu=Symbol.iterator;function jp(e){return e===null||typeof e!="object"?null:(e=Nu&&e[Nu]||e["@@iterator"],typeof e=="function"?e:null)}var Rd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pd=Object.assign,Td={};function Rn(e,t,r){this.props=e,this.context=t,this.refs=Td,this.updater=r||Rd}Rn.prototype.isReactComponent={};Rn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jd(){}jd.prototype=Rn.prototype;function Tl(e,t,r){this.props=e,this.context=t,this.refs=Td,this.updater=r||Rd}var jl=Tl.prototype=new jd;jl.constructor=Tl;Pd(jl,Rn.prototype);jl.isPureReactComponent=!0;var Ou=Array.isArray,Nd=Object.prototype.hasOwnProperty,Nl={current:null},Od={key:!0,ref:!0,__self:!0,__source:!0};function Ad(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Nd.call(t,n)&&!Od.hasOwnProperty(n)&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:$s,type:e,key:i,ref:o,props:s,_owner:Nl.current}}function Np(e,t){return{$$typeof:$s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ol(e){return typeof e=="object"&&e!==null&&e.$$typeof===$s}function Op(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Au=/\/+/g;function Mo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Op(""+e.key):t.toString(36)}function xi(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case $s:case _p:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Mo(o,0):n,Ou(s)?(r="",e!=null&&(r=e.replace(Au,"$&/")+"/"),xi(s,t,r,"",function(u){return u})):s!=null&&(Ol(s)&&(s=Np(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Au,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Ou(e))for(var a=0;a<e.length;a++){i=e[a];var l=n+Mo(i,a);o+=xi(i,t,r,l,s)}else if(l=jp(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=n+Mo(i,a++),o+=xi(i,t,r,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Js(e,t,r){if(e==null)return e;var n=[],s=0;return xi(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Ap(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var De={current:null},Si={transition:null},Ip={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:Si,ReactCurrentOwner:Nl};function Id(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:Js,forEach:function(e,t,r){Js(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Js(e,function(){t++}),t},toArray:function(e){return Js(e,function(t){return t})||[]},only:function(e){if(!Ol(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};V.Component=Rn;V.Fragment=kp;V.Profiler=Sp;V.PureComponent=Tl;V.StrictMode=xp;V.Suspense=Rp;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ip;V.act=Id;V.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Pd({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Nl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Nd.call(t,l)&&!Od.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:$s,type:e.type,key:s,ref:i,props:n,_owner:o}};V.createContext=function(e){return e={$$typeof:Ep,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bp,_context:e},e.Consumer=e};V.createElement=Ad;V.createFactory=function(e){var t=Ad.bind(null,e);return t.type=e,t};V.createRef=function(){return{current:null}};V.forwardRef=function(e){return{$$typeof:Cp,render:e}};V.isValidElement=Ol;V.lazy=function(e){return{$$typeof:Tp,_payload:{_status:-1,_result:e},_init:Ap}};V.memo=function(e,t){return{$$typeof:Pp,type:e,compare:t===void 0?null:t}};V.startTransition=function(e){var t=Si.transition;Si.transition={};try{e()}finally{Si.transition=t}};V.unstable_act=Id;V.useCallback=function(e,t){return De.current.useCallback(e,t)};V.useContext=function(e){return De.current.useContext(e)};V.useDebugValue=function(){};V.useDeferredValue=function(e){return De.current.useDeferredValue(e)};V.useEffect=function(e,t){return De.current.useEffect(e,t)};V.useId=function(){return De.current.useId()};V.useImperativeHandle=function(e,t,r){return De.current.useImperativeHandle(e,t,r)};V.useInsertionEffect=function(e,t){return De.current.useInsertionEffect(e,t)};V.useLayoutEffect=function(e,t){return De.current.useLayoutEffect(e,t)};V.useMemo=function(e,t){return De.current.useMemo(e,t)};V.useReducer=function(e,t,r){return De.current.useReducer(e,t,r)};V.useRef=function(e){return De.current.useRef(e)};V.useState=function(e){return De.current.useState(e)};V.useSyncExternalStore=function(e,t,r){return De.current.useSyncExternalStore(e,t,r)};V.useTransition=function(){return De.current.useTransition()};V.version="18.3.1";Cd.exports=V;var S=Cd.exports;const Al=wp(S),$p=vp({__proto__:null,default:Al},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp=S,Lp=Symbol.for("react.element"),Up=Symbol.for("react.fragment"),Mp=Object.prototype.hasOwnProperty,Bp=Dp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zp={key:!0,ref:!0,__self:!0,__source:!0};function $d(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Mp.call(t,n)&&!zp.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Lp,type:e,key:i,ref:o,props:s,_owner:Bp.current}}lo.Fragment=Up;lo.jsx=$d;lo.jsxs=$d;Ed.exports=lo;var h=Ed.exports,ba={},Dd={exports:{}},Ye={},Ld={exports:{}},Ud={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,z){var B=j.length;j.push(z);e:for(;0<B;){var X=B-1>>>1,ue=j[X];if(0<s(ue,z))j[X]=z,j[B]=ue,B=X;else break e}}function r(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var z=j[0],B=j.pop();if(B!==z){j[0]=B;e:for(var X=0,ue=j.length,Br=ue>>>1;X<Br;){var vt=2*(X+1)-1,mr=j[vt],Pt=vt+1,Wt=j[Pt];if(0>s(mr,B))Pt<ue&&0>s(Wt,mr)?(j[X]=Wt,j[Pt]=B,X=Pt):(j[X]=mr,j[vt]=B,X=vt);else if(Pt<ue&&0>s(Wt,B))j[X]=Wt,j[Pt]=B,X=Pt;else break e}}return z}function s(j,z){var B=j.sortIndex-z.sortIndex;return B!==0?B:j.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,g=!1,v=!1,_=!1,k=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var z=r(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=j)n(u),z.sortIndex=z.expirationTime,t(l,z);else break;z=r(u)}}function x(j){if(_=!1,y(j),!v)if(r(l)!==null)v=!0,Ze(P);else{var z=r(u);z!==null&&In(x,z.startTime-j)}}function P(j,z){v=!1,_&&(_=!1,m(T),T=-1),g=!0;var B=f;try{for(y(z),d=r(l);d!==null&&(!(d.expirationTime>z)||j&&!le());){var X=d.callback;if(typeof X=="function"){d.callback=null,f=d.priorityLevel;var ue=X(d.expirationTime<=z);z=e.unstable_now(),typeof ue=="function"?d.callback=ue:d===r(l)&&n(l),y(z)}else n(l);d=r(l)}if(d!==null)var Br=!0;else{var vt=r(u);vt!==null&&In(x,vt.startTime-z),Br=!1}return Br}finally{d=null,f=B,g=!1}}var C=!1,b=null,T=-1,$=5,D=-1;function le(){return!(e.unstable_now()-D<$)}function se(){if(b!==null){var j=e.unstable_now();D=j;var z=!0;try{z=b(!0,j)}finally{z?Rt():(C=!1,b=null)}}else C=!1}var Rt;if(typeof p=="function")Rt=function(){p(se)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,Mr=Ve.port2;Ve.port1.onmessage=se,Rt=function(){Mr.postMessage(null)}}else Rt=function(){k(se,0)};function Ze(j){b=j,C||(C=!0,Rt())}function In(j,z){T=k(function(){j(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,Ze(P))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(j){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var B=f;f=z;try{return j()}finally{f=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var B=f;f=j;try{return z()}finally{f=B}},e.unstable_scheduleCallback=function(j,z,B){var X=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?X+B:X):B=X,j){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=B+ue,j={id:c++,callback:z,priorityLevel:j,startTime:B,expirationTime:ue,sortIndex:-1},B>X?(j.sortIndex=B,t(u,j),r(l)===null&&j===r(u)&&(_?(m(T),T=-1):_=!0,In(x,B-X))):(j.sortIndex=ue,t(l,j),v||g||(v=!0,Ze(P))),j},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(j){var z=f;return function(){var B=f;f=z;try{return j.apply(this,arguments)}finally{f=B}}}})(Ud);Ld.exports=Ud;var Fp=Ld.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp=S,Qe=Fp;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Md=new Set,cs={};function Dr(e,t){wn(e,t),wn(e+"Capture",t)}function wn(e,t){for(cs[e]=t,e=0;e<t.length;e++)Md.add(t[e])}var Lt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ea=Object.prototype.hasOwnProperty,Vp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Iu={},$u={};function Hp(e){return Ea.call($u,e)?!0:Ea.call(Iu,e)?!1:Vp.test(e)?$u[e]=!0:(Iu[e]=!0,!1)}function qp(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kp(e,t,r,n){if(t===null||typeof t>"u"||qp(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Le(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Re[e]=new Le(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Re[t]=new Le(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Re[e]=new Le(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Re[e]=new Le(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Re[e]=new Le(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Re[e]=new Le(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Re[e]=new Le(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Re[e]=new Le(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Re[e]=new Le(e,5,!1,e.toLowerCase(),null,!1,!1)});var Il=/[\-:]([a-z])/g;function $l(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Il,$l);Re[t]=new Le(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Il,$l);Re[t]=new Le(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Il,$l);Re[t]=new Le(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Re[e]=new Le(e,1,!1,e.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Le("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Re[e]=new Le(e,1,!1,e.toLowerCase(),null,!0,!0)});function Dl(e,t,r,n){var s=Re.hasOwnProperty(t)?Re[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kp(t,r,s,n)&&(r=null),n||s===null?Hp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var zt=Wp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qs=Symbol.for("react.element"),Xr=Symbol.for("react.portal"),Zr=Symbol.for("react.fragment"),Ll=Symbol.for("react.strict_mode"),Ca=Symbol.for("react.profiler"),Bd=Symbol.for("react.provider"),zd=Symbol.for("react.context"),Ul=Symbol.for("react.forward_ref"),Ra=Symbol.for("react.suspense"),Pa=Symbol.for("react.suspense_list"),Ml=Symbol.for("react.memo"),Kt=Symbol.for("react.lazy"),Fd=Symbol.for("react.offscreen"),Du=Symbol.iterator;function Un(e){return e===null||typeof e!="object"?null:(e=Du&&e[Du]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Object.assign,Bo;function Gn(e){if(Bo===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Bo=t&&t[1]||""}return`
`+Bo+e}var zo=!1;function Fo(e,t){if(!e||zo)return"";zo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{zo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Gn(e):""}function Gp(e){switch(e.tag){case 5:return Gn(e.type);case 16:return Gn("Lazy");case 13:return Gn("Suspense");case 19:return Gn("SuspenseList");case 0:case 2:case 15:return e=Fo(e.type,!1),e;case 11:return e=Fo(e.type.render,!1),e;case 1:return e=Fo(e.type,!0),e;default:return""}}function Ta(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zr:return"Fragment";case Xr:return"Portal";case Ca:return"Profiler";case Ll:return"StrictMode";case Ra:return"Suspense";case Pa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zd:return(e.displayName||"Context")+".Consumer";case Bd:return(e._context.displayName||"Context")+".Provider";case Ul:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ml:return t=e.displayName||null,t!==null?t:Ta(e.type)||"Memo";case Kt:t=e._payload,e=e._init;try{return Ta(e(t))}catch{}}return null}function Jp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ta(t);case 8:return t===Ll?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qp(e){var t=Wd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ys(e){e._valueTracker||(e._valueTracker=Qp(e))}function Vd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Wd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function $i(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ja(e,t){var r=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Lu(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=cr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Hd(e,t){t=t.checked,t!=null&&Dl(e,"checked",t,!1)}function Na(e,t){Hd(e,t);var r=cr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Oa(e,t.type,r):t.hasOwnProperty("defaultValue")&&Oa(e,t.type,cr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uu(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Oa(e,t,r){(t!=="number"||$i(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Jn=Array.isArray;function hn(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+cr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Aa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(R(92));if(Jn(r)){if(1<r.length)throw Error(R(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:cr(r)}}function qd(e,t){var r=cr(t.value),n=cr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Bu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Kd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ia(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Kd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xs,Gd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xs=Xs||document.createElement("div"),Xs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ds(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yp=["Webkit","ms","Moz","O"];Object.keys(Zn).forEach(function(e){Yp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zn[t]=Zn[e]})});function Jd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zn.hasOwnProperty(e)&&Zn[e]?(""+t).trim():t+"px"}function Qd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Jd(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Xp=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $a(e,t){if(t){if(Xp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function Da(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var La=null;function Bl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ua=null,fn=null,pn=null;function zu(e){if(e=Us(e)){if(typeof Ua!="function")throw Error(R(280));var t=e.stateNode;t&&(t=po(t),Ua(e.stateNode,e.type,t))}}function Yd(e){fn?pn?pn.push(e):pn=[e]:fn=e}function Xd(){if(fn){var e=fn,t=pn;if(pn=fn=null,zu(e),t)for(e=0;e<t.length;e++)zu(t[e])}}function Zd(e,t){return e(t)}function eh(){}var Wo=!1;function th(e,t,r){if(Wo)return e(t,r);Wo=!0;try{return Zd(e,t,r)}finally{Wo=!1,(fn!==null||pn!==null)&&(eh(),Xd())}}function hs(e,t){var r=e.stateNode;if(r===null)return null;var n=po(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(R(231,t,typeof r));return r}var Ma=!1;if(Lt)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){Ma=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{Ma=!1}function Zp(e,t,r,n,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(c){this.onError(c)}}var es=!1,Di=null,Li=!1,Ba=null,em={onError:function(e){es=!0,Di=e}};function tm(e,t,r,n,s,i,o,a,l){es=!1,Di=null,Zp.apply(em,arguments)}function rm(e,t,r,n,s,i,o,a,l){if(tm.apply(this,arguments),es){if(es){var u=Di;es=!1,Di=null}else throw Error(R(198));Li||(Li=!0,Ba=u)}}function Lr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function rh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fu(e){if(Lr(e)!==e)throw Error(R(188))}function nm(e){var t=e.alternate;if(!t){if(t=Lr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Fu(s),e;if(i===n)return Fu(s),t;i=i.sibling}throw Error(R(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(R(189))}}if(r.alternate!==n)throw Error(R(190))}if(r.tag!==3)throw Error(R(188));return r.stateNode.current===r?e:t}function nh(e){return e=nm(e),e!==null?sh(e):null}function sh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sh(e);if(t!==null)return t;e=e.sibling}return null}var ih=Qe.unstable_scheduleCallback,Wu=Qe.unstable_cancelCallback,sm=Qe.unstable_shouldYield,im=Qe.unstable_requestPaint,he=Qe.unstable_now,om=Qe.unstable_getCurrentPriorityLevel,zl=Qe.unstable_ImmediatePriority,oh=Qe.unstable_UserBlockingPriority,Ui=Qe.unstable_NormalPriority,am=Qe.unstable_LowPriority,ah=Qe.unstable_IdlePriority,uo=null,Et=null;function lm(e){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(uo,e,void 0,(e.current.flags&128)===128)}catch{}}var mt=Math.clz32?Math.clz32:dm,um=Math.log,cm=Math.LN2;function dm(e){return e>>>=0,e===0?32:31-(um(e)/cm|0)|0}var Zs=64,ei=4194304;function Qn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=Qn(a):(i&=o,i!==0&&(n=Qn(i)))}else o=r&~s,o!==0?n=Qn(o):i!==0&&(n=Qn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-mt(t),s=1<<r,n|=e[r],t&=~s;return n}function hm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fm(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-mt(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=hm(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function za(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lh(){var e=Zs;return Zs<<=1,!(Zs&4194240)&&(Zs=64),e}function Vo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ds(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-mt(t),e[t]=r}function pm(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-mt(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Fl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-mt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var K=0;function uh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ch,Wl,dh,hh,fh,Fa=!1,ti=[],rr=null,nr=null,sr=null,fs=new Map,ps=new Map,Qt=[],mm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vu(e,t){switch(e){case"focusin":case"focusout":rr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":fs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ps.delete(t.pointerId)}}function Bn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Us(t),t!==null&&Wl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function gm(e,t,r,n,s){switch(t){case"focusin":return rr=Bn(rr,e,t,r,n,s),!0;case"dragenter":return nr=Bn(nr,e,t,r,n,s),!0;case"mouseover":return sr=Bn(sr,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return fs.set(i,Bn(fs.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,ps.set(i,Bn(ps.get(i)||null,e,t,r,n,s)),!0}return!1}function ph(e){var t=br(e.target);if(t!==null){var r=Lr(t);if(r!==null){if(t=r.tag,t===13){if(t=rh(r),t!==null){e.blockedOn=t,fh(e.priority,function(){dh(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Wa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);La=n,r.target.dispatchEvent(n),La=null}else return t=Us(r),t!==null&&Wl(t),e.blockedOn=r,!1;t.shift()}return!0}function Hu(e,t,r){bi(e)&&r.delete(t)}function ym(){Fa=!1,rr!==null&&bi(rr)&&(rr=null),nr!==null&&bi(nr)&&(nr=null),sr!==null&&bi(sr)&&(sr=null),fs.forEach(Hu),ps.forEach(Hu)}function zn(e,t){e.blockedOn===t&&(e.blockedOn=null,Fa||(Fa=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,ym)))}function ms(e){function t(s){return zn(s,e)}if(0<ti.length){zn(ti[0],e);for(var r=1;r<ti.length;r++){var n=ti[r];n.blockedOn===e&&(n.blockedOn=null)}}for(rr!==null&&zn(rr,e),nr!==null&&zn(nr,e),sr!==null&&zn(sr,e),fs.forEach(t),ps.forEach(t),r=0;r<Qt.length;r++)n=Qt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Qt.length&&(r=Qt[0],r.blockedOn===null);)ph(r),r.blockedOn===null&&Qt.shift()}var mn=zt.ReactCurrentBatchConfig,Bi=!0;function vm(e,t,r,n){var s=K,i=mn.transition;mn.transition=null;try{K=1,Vl(e,t,r,n)}finally{K=s,mn.transition=i}}function wm(e,t,r,n){var s=K,i=mn.transition;mn.transition=null;try{K=4,Vl(e,t,r,n)}finally{K=s,mn.transition=i}}function Vl(e,t,r,n){if(Bi){var s=Wa(e,t,r,n);if(s===null)ea(e,t,n,zi,r),Vu(e,n);else if(gm(s,e,t,r,n))n.stopPropagation();else if(Vu(e,n),t&4&&-1<mm.indexOf(e)){for(;s!==null;){var i=Us(s);if(i!==null&&ch(i),i=Wa(e,t,r,n),i===null&&ea(e,t,n,zi,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ea(e,t,n,null,r)}}var zi=null;function Wa(e,t,r,n){if(zi=null,e=Bl(n),e=br(e),e!==null)if(t=Lr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=rh(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zi=e,null}function mh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(om()){case zl:return 1;case oh:return 4;case Ui:case am:return 16;case ah:return 536870912;default:return 16}default:return 16}}var Zt=null,Hl=null,Ei=null;function gh(){if(Ei)return Ei;var e,t=Hl,r=t.length,n,s="value"in Zt?Zt.value:Zt.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Ei=s.slice(e,1<n?1-n:void 0)}function Ci(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ri(){return!0}function qu(){return!1}function Xe(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ri:qu,this.isPropagationStopped=qu,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),t}var Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ql=Xe(Pn),Ls=ae({},Pn,{view:0,detail:0}),_m=Xe(Ls),Ho,qo,Fn,co=ae({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fn&&(Fn&&e.type==="mousemove"?(Ho=e.screenX-Fn.screenX,qo=e.screenY-Fn.screenY):qo=Ho=0,Fn=e),Ho)},movementY:function(e){return"movementY"in e?e.movementY:qo}}),Ku=Xe(co),km=ae({},co,{dataTransfer:0}),xm=Xe(km),Sm=ae({},Ls,{relatedTarget:0}),Ko=Xe(Sm),bm=ae({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0}),Em=Xe(bm),Cm=ae({},Pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rm=Xe(Cm),Pm=ae({},Pn,{data:0}),Gu=Xe(Pm),Tm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Om(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Nm[e])?!!t[e]:!1}function Kl(){return Om}var Am=ae({},Ls,{key:function(e){if(e.key){var t=Tm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ci(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kl,charCode:function(e){return e.type==="keypress"?Ci(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ci(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Im=Xe(Am),$m=ae({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ju=Xe($m),Dm=ae({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kl}),Lm=Xe(Dm),Um=ae({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mm=Xe(Um),Bm=ae({},co,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zm=Xe(Bm),Fm=[9,13,27,32],Gl=Lt&&"CompositionEvent"in window,ts=null;Lt&&"documentMode"in document&&(ts=document.documentMode);var Wm=Lt&&"TextEvent"in window&&!ts,yh=Lt&&(!Gl||ts&&8<ts&&11>=ts),Qu=" ",Yu=!1;function vh(e,t){switch(e){case"keyup":return Fm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var en=!1;function Vm(e,t){switch(e){case"compositionend":return wh(t);case"keypress":return t.which!==32?null:(Yu=!0,Qu);case"textInput":return e=t.data,e===Qu&&Yu?null:e;default:return null}}function Hm(e,t){if(en)return e==="compositionend"||!Gl&&vh(e,t)?(e=gh(),Ei=Hl=Zt=null,en=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yh&&t.locale!=="ko"?null:t.data;default:return null}}var qm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qm[e.type]:t==="textarea"}function _h(e,t,r,n){Yd(n),t=Fi(t,"onChange"),0<t.length&&(r=new ql("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var rs=null,gs=null;function Km(e){Nh(e,0)}function ho(e){var t=nn(e);if(Vd(t))return e}function Gm(e,t){if(e==="change")return t}var kh=!1;if(Lt){var Go;if(Lt){var Jo="oninput"in document;if(!Jo){var Zu=document.createElement("div");Zu.setAttribute("oninput","return;"),Jo=typeof Zu.oninput=="function"}Go=Jo}else Go=!1;kh=Go&&(!document.documentMode||9<document.documentMode)}function ec(){rs&&(rs.detachEvent("onpropertychange",xh),gs=rs=null)}function xh(e){if(e.propertyName==="value"&&ho(gs)){var t=[];_h(t,gs,e,Bl(e)),th(Km,t)}}function Jm(e,t,r){e==="focusin"?(ec(),rs=t,gs=r,rs.attachEvent("onpropertychange",xh)):e==="focusout"&&ec()}function Qm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ho(gs)}function Ym(e,t){if(e==="click")return ho(t)}function Xm(e,t){if(e==="input"||e==="change")return ho(t)}function Zm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yt=typeof Object.is=="function"?Object.is:Zm;function ys(e,t){if(yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ea.call(t,s)||!yt(e[s],t[s]))return!1}return!0}function tc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rc(e,t){var r=tc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tc(r)}}function Sh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bh(){for(var e=window,t=$i();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=$i(e.document)}return t}function Jl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eg(e){var t=bh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Sh(r.ownerDocument.documentElement,r)){if(n!==null&&Jl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=rc(r,i);var o=rc(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tg=Lt&&"documentMode"in document&&11>=document.documentMode,tn=null,Va=null,ns=null,Ha=!1;function nc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ha||tn==null||tn!==$i(n)||(n=tn,"selectionStart"in n&&Jl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ns&&ys(ns,n)||(ns=n,n=Fi(Va,"onSelect"),0<n.length&&(t=new ql("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=tn)))}function ni(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var rn={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionend:ni("Transition","TransitionEnd")},Qo={},Eh={};Lt&&(Eh=document.createElement("div").style,"AnimationEvent"in window||(delete rn.animationend.animation,delete rn.animationiteration.animation,delete rn.animationstart.animation),"TransitionEvent"in window||delete rn.transitionend.transition);function fo(e){if(Qo[e])return Qo[e];if(!rn[e])return e;var t=rn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Eh)return Qo[e]=t[r];return e}var Ch=fo("animationend"),Rh=fo("animationiteration"),Ph=fo("animationstart"),Th=fo("transitionend"),jh=new Map,sc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(e,t){jh.set(e,t),Dr(t,[e])}for(var Yo=0;Yo<sc.length;Yo++){var Xo=sc[Yo],rg=Xo.toLowerCase(),ng=Xo[0].toUpperCase()+Xo.slice(1);hr(rg,"on"+ng)}hr(Ch,"onAnimationEnd");hr(Rh,"onAnimationIteration");hr(Ph,"onAnimationStart");hr("dblclick","onDoubleClick");hr("focusin","onFocus");hr("focusout","onBlur");hr(Th,"onTransitionEnd");wn("onMouseEnter",["mouseout","mouseover"]);wn("onMouseLeave",["mouseout","mouseover"]);wn("onPointerEnter",["pointerout","pointerover"]);wn("onPointerLeave",["pointerout","pointerover"]);Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yn));function ic(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,rm(n,t,void 0,e),e.currentTarget=null}function Nh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;ic(s,a,u),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;ic(s,a,u),i=l}}}if(Li)throw e=Ba,Li=!1,Ba=null,e}function Z(e,t){var r=t[Qa];r===void 0&&(r=t[Qa]=new Set);var n=e+"__bubble";r.has(n)||(Oh(t,e,2,!1),r.add(n))}function Zo(e,t,r){var n=0;t&&(n|=4),Oh(r,e,n,t)}var si="_reactListening"+Math.random().toString(36).slice(2);function vs(e){if(!e[si]){e[si]=!0,Md.forEach(function(r){r!=="selectionchange"&&(sg.has(r)||Zo(r,!1,e),Zo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[si]||(t[si]=!0,Zo("selectionchange",!1,t))}}function Oh(e,t,r,n){switch(mh(t)){case 1:var s=vm;break;case 4:s=wm;break;default:s=Vl}r=s.bind(null,t,r,e),s=void 0,!Ma||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function ea(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=br(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}th(function(){var u=i,c=Bl(r),d=[];e:{var f=jh.get(e);if(f!==void 0){var g=ql,v=e;switch(e){case"keypress":if(Ci(r)===0)break e;case"keydown":case"keyup":g=Im;break;case"focusin":v="focus",g=Ko;break;case"focusout":v="blur",g=Ko;break;case"beforeblur":case"afterblur":g=Ko;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ku;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=xm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Lm;break;case Ch:case Rh:case Ph:g=Em;break;case Th:g=Mm;break;case"scroll":g=_m;break;case"wheel":g=zm;break;case"copy":case"cut":case"paste":g=Rm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ju}var _=(t&4)!==0,k=!_&&e==="scroll",m=_?f!==null?f+"Capture":null:f;_=[];for(var p=u,y;p!==null;){y=p;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,m!==null&&(x=hs(p,m),x!=null&&_.push(ws(p,x,y)))),k)break;p=p.return}0<_.length&&(f=new g(f,v,null,r,c),d.push({event:f,listeners:_}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",f&&r!==La&&(v=r.relatedTarget||r.fromElement)&&(br(v)||v[Ut]))break e;if((g||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=r.relatedTarget||r.toElement,g=u,v=v?br(v):null,v!==null&&(k=Lr(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(_=Ku,x="onMouseLeave",m="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(_=Ju,x="onPointerLeave",m="onPointerEnter",p="pointer"),k=g==null?f:nn(g),y=v==null?f:nn(v),f=new _(x,p+"leave",g,r,c),f.target=k,f.relatedTarget=y,x=null,br(c)===u&&(_=new _(m,p+"enter",v,r,c),_.target=y,_.relatedTarget=k,x=_),k=x,g&&v)t:{for(_=g,m=v,p=0,y=_;y;y=zr(y))p++;for(y=0,x=m;x;x=zr(x))y++;for(;0<p-y;)_=zr(_),p--;for(;0<y-p;)m=zr(m),y--;for(;p--;){if(_===m||m!==null&&_===m.alternate)break t;_=zr(_),m=zr(m)}_=null}else _=null;g!==null&&oc(d,f,g,_,!1),v!==null&&k!==null&&oc(d,k,v,_,!0)}}e:{if(f=u?nn(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var P=Gm;else if(Xu(f))if(kh)P=Xm;else{P=Qm;var C=Jm}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=Ym);if(P&&(P=P(e,u))){_h(d,P,r,c);break e}C&&C(e,f,u),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Oa(f,"number",f.value)}switch(C=u?nn(u):window,e){case"focusin":(Xu(C)||C.contentEditable==="true")&&(tn=C,Va=u,ns=null);break;case"focusout":ns=Va=tn=null;break;case"mousedown":Ha=!0;break;case"contextmenu":case"mouseup":case"dragend":Ha=!1,nc(d,r,c);break;case"selectionchange":if(tg)break;case"keydown":case"keyup":nc(d,r,c)}var b;if(Gl)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else en?vh(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(yh&&r.locale!=="ko"&&(en||T!=="onCompositionStart"?T==="onCompositionEnd"&&en&&(b=gh()):(Zt=c,Hl="value"in Zt?Zt.value:Zt.textContent,en=!0)),C=Fi(u,T),0<C.length&&(T=new Gu(T,e,null,r,c),d.push({event:T,listeners:C}),b?T.data=b:(b=wh(r),b!==null&&(T.data=b)))),(b=Wm?Vm(e,r):Hm(e,r))&&(u=Fi(u,"onBeforeInput"),0<u.length&&(c=new Gu("onBeforeInput","beforeinput",null,r,c),d.push({event:c,listeners:u}),c.data=b))}Nh(d,t)})}function ws(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Fi(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=hs(e,r),i!=null&&n.unshift(ws(e,i,s)),i=hs(e,t),i!=null&&n.push(ws(e,i,s))),e=e.return}return n}function zr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function oc(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,s?(l=hs(r,i),l!=null&&o.unshift(ws(r,l,a))):s||(l=hs(r,i),l!=null&&o.push(ws(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var ig=/\r\n?/g,og=/\u0000|\uFFFD/g;function ac(e){return(typeof e=="string"?e:""+e).replace(ig,`
`).replace(og,"")}function ii(e,t,r){if(t=ac(t),ac(e)!==t&&r)throw Error(R(425))}function Wi(){}var qa=null,Ka=null;function Ga(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ja=typeof setTimeout=="function"?setTimeout:void 0,ag=typeof clearTimeout=="function"?clearTimeout:void 0,lc=typeof Promise=="function"?Promise:void 0,lg=typeof queueMicrotask=="function"?queueMicrotask:typeof lc<"u"?function(e){return lc.resolve(null).then(e).catch(ug)}:Ja;function ug(e){setTimeout(function(){throw e})}function ta(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),ms(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ms(t)}function ir(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function uc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Tn=Math.random().toString(36).slice(2),bt="__reactFiber$"+Tn,_s="__reactProps$"+Tn,Ut="__reactContainer$"+Tn,Qa="__reactEvents$"+Tn,cg="__reactListeners$"+Tn,dg="__reactHandles$"+Tn;function br(e){var t=e[bt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ut]||r[bt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=uc(e);e!==null;){if(r=e[bt])return r;e=uc(e)}return t}e=r,r=e.parentNode}return null}function Us(e){return e=e[bt]||e[Ut],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function po(e){return e[_s]||null}var Ya=[],sn=-1;function fr(e){return{current:e}}function ee(e){0>sn||(e.current=Ya[sn],Ya[sn]=null,sn--)}function Y(e,t){sn++,Ya[sn]=e.current,e.current=t}var dr={},Oe=fr(dr),ze=fr(!1),Nr=dr;function _n(e,t){var r=e.type.contextTypes;if(!r)return dr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Fe(e){return e=e.childContextTypes,e!=null}function Vi(){ee(ze),ee(Oe)}function cc(e,t,r){if(Oe.current!==dr)throw Error(R(168));Y(Oe,t),Y(ze,r)}function Ah(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(R(108,Jp(e)||"Unknown",s));return ae({},r,n)}function Hi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dr,Nr=Oe.current,Y(Oe,e),Y(ze,ze.current),!0}function dc(e,t,r){var n=e.stateNode;if(!n)throw Error(R(169));r?(e=Ah(e,t,Nr),n.__reactInternalMemoizedMergedChildContext=e,ee(ze),ee(Oe),Y(Oe,e)):ee(ze),Y(ze,r)}var At=null,mo=!1,ra=!1;function Ih(e){At===null?At=[e]:At.push(e)}function hg(e){mo=!0,Ih(e)}function pr(){if(!ra&&At!==null){ra=!0;var e=0,t=K;try{var r=At;for(K=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}At=null,mo=!1}catch(s){throw At!==null&&(At=At.slice(e+1)),ih(zl,pr),s}finally{K=t,ra=!1}}return null}var on=[],an=0,qi=null,Ki=0,nt=[],st=0,Or=null,It=1,$t="";function vr(e,t){on[an++]=Ki,on[an++]=qi,qi=e,Ki=t}function $h(e,t,r){nt[st++]=It,nt[st++]=$t,nt[st++]=Or,Or=e;var n=It;e=$t;var s=32-mt(n)-1;n&=~(1<<s),r+=1;var i=32-mt(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,It=1<<32-mt(t)+s|r<<s|n,$t=i+e}else It=1<<i|r<<s|n,$t=e}function Ql(e){e.return!==null&&(vr(e,1),$h(e,1,0))}function Yl(e){for(;e===qi;)qi=on[--an],on[an]=null,Ki=on[--an],on[an]=null;for(;e===Or;)Or=nt[--st],nt[st]=null,$t=nt[--st],nt[st]=null,It=nt[--st],nt[st]=null}var Je=null,Ge=null,ne=!1,pt=null;function Dh(e,t){var r=it(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function hc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Je=e,Ge=ir(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Je=e,Ge=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Or!==null?{id:It,overflow:$t}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=it(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Je=e,Ge=null,!0):!1;default:return!1}}function Xa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Za(e){if(ne){var t=Ge;if(t){var r=t;if(!hc(e,t)){if(Xa(e))throw Error(R(418));t=ir(r.nextSibling);var n=Je;t&&hc(e,t)?Dh(n,r):(e.flags=e.flags&-4097|2,ne=!1,Je=e)}}else{if(Xa(e))throw Error(R(418));e.flags=e.flags&-4097|2,ne=!1,Je=e}}}function fc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Je=e}function oi(e){if(e!==Je)return!1;if(!ne)return fc(e),ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ga(e.type,e.memoizedProps)),t&&(t=Ge)){if(Xa(e))throw Lh(),Error(R(418));for(;t;)Dh(e,t),t=ir(t.nextSibling)}if(fc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ge=ir(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ge=null}}else Ge=Je?ir(e.stateNode.nextSibling):null;return!0}function Lh(){for(var e=Ge;e;)e=ir(e.nextSibling)}function kn(){Ge=Je=null,ne=!1}function Xl(e){pt===null?pt=[e]:pt.push(e)}var fg=zt.ReactCurrentBatchConfig;function Wn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(R(309));var n=r.stateNode}if(!n)throw Error(R(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(R(284));if(!r._owner)throw Error(R(290,e))}return e}function ai(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pc(e){var t=e._init;return t(e._payload)}function Uh(e){function t(m,p){if(e){var y=m.deletions;y===null?(m.deletions=[p],m.flags|=16):y.push(p)}}function r(m,p){if(!e)return null;for(;p!==null;)t(m,p),p=p.sibling;return null}function n(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=ur(m,p),m.index=0,m.sibling=null,m}function i(m,p,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<p?(m.flags|=2,p):y):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,p,y,x){return p===null||p.tag!==6?(p=ua(y,m.mode,x),p.return=m,p):(p=s(p,y),p.return=m,p)}function l(m,p,y,x){var P=y.type;return P===Zr?c(m,p,y.props.children,x,y.key):p!==null&&(p.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Kt&&pc(P)===p.type)?(x=s(p,y.props),x.ref=Wn(m,p,y),x.return=m,x):(x=Ai(y.type,y.key,y.props,null,m.mode,x),x.ref=Wn(m,p,y),x.return=m,x)}function u(m,p,y,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=ca(y,m.mode,x),p.return=m,p):(p=s(p,y.children||[]),p.return=m,p)}function c(m,p,y,x,P){return p===null||p.tag!==7?(p=Tr(y,m.mode,x,P),p.return=m,p):(p=s(p,y),p.return=m,p)}function d(m,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=ua(""+p,m.mode,y),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Qs:return y=Ai(p.type,p.key,p.props,null,m.mode,y),y.ref=Wn(m,null,p),y.return=m,y;case Xr:return p=ca(p,m.mode,y),p.return=m,p;case Kt:var x=p._init;return d(m,x(p._payload),y)}if(Jn(p)||Un(p))return p=Tr(p,m.mode,y,null),p.return=m,p;ai(m,p)}return null}function f(m,p,y,x){var P=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return P!==null?null:a(m,p,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qs:return y.key===P?l(m,p,y,x):null;case Xr:return y.key===P?u(m,p,y,x):null;case Kt:return P=y._init,f(m,p,P(y._payload),x)}if(Jn(y)||Un(y))return P!==null?null:c(m,p,y,x,null);ai(m,y)}return null}function g(m,p,y,x,P){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(y)||null,a(p,m,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Qs:return m=m.get(x.key===null?y:x.key)||null,l(p,m,x,P);case Xr:return m=m.get(x.key===null?y:x.key)||null,u(p,m,x,P);case Kt:var C=x._init;return g(m,p,y,C(x._payload),P)}if(Jn(x)||Un(x))return m=m.get(y)||null,c(p,m,x,P,null);ai(p,x)}return null}function v(m,p,y,x){for(var P=null,C=null,b=p,T=p=0,$=null;b!==null&&T<y.length;T++){b.index>T?($=b,b=null):$=b.sibling;var D=f(m,b,y[T],x);if(D===null){b===null&&(b=$);break}e&&b&&D.alternate===null&&t(m,b),p=i(D,p,T),C===null?P=D:C.sibling=D,C=D,b=$}if(T===y.length)return r(m,b),ne&&vr(m,T),P;if(b===null){for(;T<y.length;T++)b=d(m,y[T],x),b!==null&&(p=i(b,p,T),C===null?P=b:C.sibling=b,C=b);return ne&&vr(m,T),P}for(b=n(m,b);T<y.length;T++)$=g(b,m,T,y[T],x),$!==null&&(e&&$.alternate!==null&&b.delete($.key===null?T:$.key),p=i($,p,T),C===null?P=$:C.sibling=$,C=$);return e&&b.forEach(function(le){return t(m,le)}),ne&&vr(m,T),P}function _(m,p,y,x){var P=Un(y);if(typeof P!="function")throw Error(R(150));if(y=P.call(y),y==null)throw Error(R(151));for(var C=P=null,b=p,T=p=0,$=null,D=y.next();b!==null&&!D.done;T++,D=y.next()){b.index>T?($=b,b=null):$=b.sibling;var le=f(m,b,D.value,x);if(le===null){b===null&&(b=$);break}e&&b&&le.alternate===null&&t(m,b),p=i(le,p,T),C===null?P=le:C.sibling=le,C=le,b=$}if(D.done)return r(m,b),ne&&vr(m,T),P;if(b===null){for(;!D.done;T++,D=y.next())D=d(m,D.value,x),D!==null&&(p=i(D,p,T),C===null?P=D:C.sibling=D,C=D);return ne&&vr(m,T),P}for(b=n(m,b);!D.done;T++,D=y.next())D=g(b,m,T,D.value,x),D!==null&&(e&&D.alternate!==null&&b.delete(D.key===null?T:D.key),p=i(D,p,T),C===null?P=D:C.sibling=D,C=D);return e&&b.forEach(function(se){return t(m,se)}),ne&&vr(m,T),P}function k(m,p,y,x){if(typeof y=="object"&&y!==null&&y.type===Zr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Qs:e:{for(var P=y.key,C=p;C!==null;){if(C.key===P){if(P=y.type,P===Zr){if(C.tag===7){r(m,C.sibling),p=s(C,y.props.children),p.return=m,m=p;break e}}else if(C.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Kt&&pc(P)===C.type){r(m,C.sibling),p=s(C,y.props),p.ref=Wn(m,C,y),p.return=m,m=p;break e}r(m,C);break}else t(m,C);C=C.sibling}y.type===Zr?(p=Tr(y.props.children,m.mode,x,y.key),p.return=m,m=p):(x=Ai(y.type,y.key,y.props,null,m.mode,x),x.ref=Wn(m,p,y),x.return=m,m=x)}return o(m);case Xr:e:{for(C=y.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){r(m,p.sibling),p=s(p,y.children||[]),p.return=m,m=p;break e}else{r(m,p);break}else t(m,p);p=p.sibling}p=ca(y,m.mode,x),p.return=m,m=p}return o(m);case Kt:return C=y._init,k(m,p,C(y._payload),x)}if(Jn(y))return v(m,p,y,x);if(Un(y))return _(m,p,y,x);ai(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(r(m,p.sibling),p=s(p,y),p.return=m,m=p):(r(m,p),p=ua(y,m.mode,x),p.return=m,m=p),o(m)):r(m,p)}return k}var xn=Uh(!0),Mh=Uh(!1),Gi=fr(null),Ji=null,ln=null,Zl=null;function eu(){Zl=ln=Ji=null}function tu(e){var t=Gi.current;ee(Gi),e._currentValue=t}function el(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function gn(e,t){Ji=e,Zl=ln=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Be=!0),e.firstContext=null)}function at(e){var t=e._currentValue;if(Zl!==e)if(e={context:e,memoizedValue:t,next:null},ln===null){if(Ji===null)throw Error(R(308));ln=e,Ji.dependencies={lanes:0,firstContext:e}}else ln=ln.next=e;return t}var Er=null;function ru(e){Er===null?Er=[e]:Er.push(e)}function Bh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,ru(t)):(r.next=s.next,s.next=r),t.interleaved=r,Mt(e,n)}function Mt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Gt=!1;function nu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function or(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,H&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Mt(e,r)}return s=n.interleaved,s===null?(t.next=t,ru(n)):(t.next=s.next,s.next=t),n.interleaved=t,Mt(e,r)}function Ri(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Fl(e,r)}}function mc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Qi(e,t,r,n){var s=e.updateQueue;Gt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,c=u=l=null,a=i;do{var f=a.lane,g=a.eventTime;if((n&f)===f){c!==null&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,_=a;switch(f=t,g=r,_.tag){case 1:if(v=_.payload,typeof v=="function"){d=v.call(g,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,f=typeof v=="function"?v.call(g,d,f):v,f==null)break e;d=ae({},d,f);break e;case 2:Gt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=g,l=d):c=c.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Ir|=o,e.lanes=o,e.memoizedState=d}}function gc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(R(191,s));s.call(n)}}}var Ms={},Ct=fr(Ms),ks=fr(Ms),xs=fr(Ms);function Cr(e){if(e===Ms)throw Error(R(174));return e}function su(e,t){switch(Y(xs,t),Y(ks,e),Y(Ct,Ms),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ia(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ia(t,e)}ee(Ct),Y(Ct,t)}function Sn(){ee(Ct),ee(ks),ee(xs)}function Fh(e){Cr(xs.current);var t=Cr(Ct.current),r=Ia(t,e.type);t!==r&&(Y(ks,e),Y(Ct,r))}function iu(e){ks.current===e&&(ee(Ct),ee(ks))}var ie=fr(0);function Yi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ou(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var Pi=zt.ReactCurrentDispatcher,sa=zt.ReactCurrentBatchConfig,Ar=0,oe=null,we=null,ke=null,Xi=!1,ss=!1,Ss=0,pg=0;function Te(){throw Error(R(321))}function au(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!yt(e[r],t[r]))return!1;return!0}function lu(e,t,r,n,s,i){if(Ar=i,oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pi.current=e===null||e.memoizedState===null?vg:wg,e=r(n,s),ss){i=0;do{if(ss=!1,Ss=0,25<=i)throw Error(R(301));i+=1,ke=we=null,t.updateQueue=null,Pi.current=_g,e=r(n,s)}while(ss)}if(Pi.current=Zi,t=we!==null&&we.next!==null,Ar=0,ke=we=oe=null,Xi=!1,t)throw Error(R(300));return e}function uu(){var e=Ss!==0;return Ss=0,e}function xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?oe.memoizedState=ke=e:ke=ke.next=e,ke}function lt(){if(we===null){var e=oe.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=ke===null?oe.memoizedState:ke.next;if(t!==null)ke=t,we=e;else{if(e===null)throw Error(R(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},ke===null?oe.memoizedState=ke=e:ke=ke.next=e}return ke}function bs(e,t){return typeof t=="function"?t(e):t}function ia(e){var t=lt(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var n=we,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((Ar&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,oe.lanes|=c,Ir|=c}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=a,yt(n,t.memoizedState)||(Be=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,oe.lanes|=i,Ir|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function oa(e){var t=lt(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);yt(i,t.memoizedState)||(Be=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Wh(){}function Vh(e,t){var r=oe,n=lt(),s=t(),i=!yt(n.memoizedState,s);if(i&&(n.memoizedState=s,Be=!0),n=n.queue,cu(Kh.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ke!==null&&ke.memoizedState.tag&1){if(r.flags|=2048,Es(9,qh.bind(null,r,n,s,t),void 0,null),xe===null)throw Error(R(349));Ar&30||Hh(r,t,s)}return s}function Hh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function qh(e,t,r,n){t.value=r,t.getSnapshot=n,Gh(t)&&Jh(e)}function Kh(e,t,r){return r(function(){Gh(t)&&Jh(e)})}function Gh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!yt(e,r)}catch{return!0}}function Jh(e){var t=Mt(e,1);t!==null&&gt(t,e,1,-1)}function yc(e){var t=xt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=yg.bind(null,oe,e),[t.memoizedState,e]}function Es(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Qh(){return lt().memoizedState}function Ti(e,t,r,n){var s=xt();oe.flags|=e,s.memoizedState=Es(1|t,r,void 0,n===void 0?null:n)}function go(e,t,r,n){var s=lt();n=n===void 0?null:n;var i=void 0;if(we!==null){var o=we.memoizedState;if(i=o.destroy,n!==null&&au(n,o.deps)){s.memoizedState=Es(t,r,i,n);return}}oe.flags|=e,s.memoizedState=Es(1|t,r,i,n)}function vc(e,t){return Ti(8390656,8,e,t)}function cu(e,t){return go(2048,8,e,t)}function Yh(e,t){return go(4,2,e,t)}function Xh(e,t){return go(4,4,e,t)}function Zh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ef(e,t,r){return r=r!=null?r.concat([e]):null,go(4,4,Zh.bind(null,t,e),r)}function du(){}function tf(e,t){var r=lt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&au(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function rf(e,t){var r=lt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&au(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function nf(e,t,r){return Ar&21?(yt(r,t)||(r=lh(),oe.lanes|=r,Ir|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Be=!0),e.memoizedState=r)}function mg(e,t){var r=K;K=r!==0&&4>r?r:4,e(!0);var n=sa.transition;sa.transition={};try{e(!1),t()}finally{K=r,sa.transition=n}}function sf(){return lt().memoizedState}function gg(e,t,r){var n=lr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},of(e))af(t,r);else if(r=Bh(e,t,r,n),r!==null){var s=$e();gt(r,e,n,s),lf(r,t,n)}}function yg(e,t,r){var n=lr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(of(e))af(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,yt(a,o)){var l=t.interleaved;l===null?(s.next=s,ru(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=Bh(e,t,s,n),r!==null&&(s=$e(),gt(r,e,n,s),lf(r,t,n))}}function of(e){var t=e.alternate;return e===oe||t!==null&&t===oe}function af(e,t){ss=Xi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function lf(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Fl(e,r)}}var Zi={readContext:at,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},vg={readContext:at,useCallback:function(e,t){return xt().memoizedState=[e,t===void 0?null:t],e},useContext:at,useEffect:vc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ti(4194308,4,Zh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ti(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ti(4,2,e,t)},useMemo:function(e,t){var r=xt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=gg.bind(null,oe,e),[n.memoizedState,e]},useRef:function(e){var t=xt();return e={current:e},t.memoizedState=e},useState:yc,useDebugValue:du,useDeferredValue:function(e){return xt().memoizedState=e},useTransition:function(){var e=yc(!1),t=e[0];return e=mg.bind(null,e[1]),xt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=oe,s=xt();if(ne){if(r===void 0)throw Error(R(407));r=r()}else{if(r=t(),xe===null)throw Error(R(349));Ar&30||Hh(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,vc(Kh.bind(null,n,i,e),[e]),n.flags|=2048,Es(9,qh.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=xt(),t=xe.identifierPrefix;if(ne){var r=$t,n=It;r=(n&~(1<<32-mt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ss++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=pg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wg={readContext:at,useCallback:tf,useContext:at,useEffect:cu,useImperativeHandle:ef,useInsertionEffect:Yh,useLayoutEffect:Xh,useMemo:rf,useReducer:ia,useRef:Qh,useState:function(){return ia(bs)},useDebugValue:du,useDeferredValue:function(e){var t=lt();return nf(t,we.memoizedState,e)},useTransition:function(){var e=ia(bs)[0],t=lt().memoizedState;return[e,t]},useMutableSource:Wh,useSyncExternalStore:Vh,useId:sf,unstable_isNewReconciler:!1},_g={readContext:at,useCallback:tf,useContext:at,useEffect:cu,useImperativeHandle:ef,useInsertionEffect:Yh,useLayoutEffect:Xh,useMemo:rf,useReducer:oa,useRef:Qh,useState:function(){return oa(bs)},useDebugValue:du,useDeferredValue:function(e){var t=lt();return we===null?t.memoizedState=e:nf(t,we.memoizedState,e)},useTransition:function(){var e=oa(bs)[0],t=lt().memoizedState;return[e,t]},useMutableSource:Wh,useSyncExternalStore:Vh,useId:sf,unstable_isNewReconciler:!1};function dt(e,t){if(e&&e.defaultProps){t=ae({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function tl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ae({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var yo={isMounted:function(e){return(e=e._reactInternals)?Lr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=$e(),s=lr(e),i=Dt(n,s);i.payload=t,r!=null&&(i.callback=r),t=or(e,i,s),t!==null&&(gt(t,e,s,n),Ri(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=$e(),s=lr(e),i=Dt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=or(e,i,s),t!==null&&(gt(t,e,s,n),Ri(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=$e(),n=lr(e),s=Dt(r,n);s.tag=2,t!=null&&(s.callback=t),t=or(e,s,n),t!==null&&(gt(t,e,n,r),Ri(t,e,n))}};function wc(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!ys(r,n)||!ys(s,i):!0}function uf(e,t,r){var n=!1,s=dr,i=t.contextType;return typeof i=="object"&&i!==null?i=at(i):(s=Fe(t)?Nr:Oe.current,n=t.contextTypes,i=(n=n!=null)?_n(e,s):dr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function _c(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function rl(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},nu(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=at(i):(i=Fe(t)?Nr:Oe.current,s.context=_n(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(tl(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&yo.enqueueReplaceState(s,s.state,null),Qi(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function bn(e,t){try{var r="",n=t;do r+=Gp(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function aa(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function nl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var kg=typeof WeakMap=="function"?WeakMap:Map;function cf(e,t,r){r=Dt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){to||(to=!0,fl=n),nl(e,t)},r}function df(e,t,r){r=Dt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){nl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){nl(e,t),typeof n!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function kc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new kg;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=$g.bind(null,e,t,r),t.then(e,e))}function xc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sc(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Dt(-1,1),t.tag=2,or(r,t,1))),r.lanes|=1),e)}var xg=zt.ReactCurrentOwner,Be=!1;function Ie(e,t,r,n){t.child=e===null?Mh(t,null,r,n):xn(t,e.child,r,n)}function bc(e,t,r,n,s){r=r.render;var i=t.ref;return gn(t,s),n=lu(e,t,r,n,i,s),r=uu(),e!==null&&!Be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bt(e,t,s)):(ne&&r&&Ql(t),t.flags|=1,Ie(e,t,n,s),t.child)}function Ec(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!wu(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,hf(e,t,i,n,s)):(e=Ai(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ys,r(o,n)&&e.ref===t.ref)return Bt(e,t,s)}return t.flags|=1,e=ur(i,n),e.ref=t.ref,e.return=t,t.child=e}function hf(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(ys(i,n)&&e.ref===t.ref)if(Be=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Be=!0);else return t.lanes=e.lanes,Bt(e,t,s)}return sl(e,t,r,n,s)}function ff(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(cn,Ke),Ke|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Y(cn,Ke),Ke|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Y(cn,Ke),Ke|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Y(cn,Ke),Ke|=n;return Ie(e,t,s,r),t.child}function pf(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function sl(e,t,r,n,s){var i=Fe(r)?Nr:Oe.current;return i=_n(t,i),gn(t,s),r=lu(e,t,r,n,i,s),n=uu(),e!==null&&!Be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bt(e,t,s)):(ne&&n&&Ql(t),t.flags|=1,Ie(e,t,r,s),t.child)}function Cc(e,t,r,n,s){if(Fe(r)){var i=!0;Hi(t)}else i=!1;if(gn(t,s),t.stateNode===null)ji(e,t),uf(t,r,n),rl(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=at(u):(u=Fe(r)?Nr:Oe.current,u=_n(t,u));var c=r.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&_c(t,o,n,u),Gt=!1;var f=t.memoizedState;o.state=f,Qi(t,n,o,s),l=t.memoizedState,a!==n||f!==l||ze.current||Gt?(typeof c=="function"&&(tl(t,r,c,n),l=t.memoizedState),(a=Gt||wc(t,r,a,n,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,zh(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:dt(t.type,a),o.props=u,d=t.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=at(l):(l=Fe(r)?Nr:Oe.current,l=_n(t,l));var g=r.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&_c(t,o,n,l),Gt=!1,f=t.memoizedState,o.state=f,Qi(t,n,o,s);var v=t.memoizedState;a!==d||f!==v||ze.current||Gt?(typeof g=="function"&&(tl(t,r,g,n),v=t.memoizedState),(u=Gt||wc(t,r,u,n,f,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return il(e,t,r,n,i,s)}function il(e,t,r,n,s,i){pf(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&dc(t,r,!1),Bt(e,t,i);n=t.stateNode,xg.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=xn(t,e.child,null,i),t.child=xn(t,null,a,i)):Ie(e,t,a,i),t.memoizedState=n.state,s&&dc(t,r,!0),t.child}function mf(e){var t=e.stateNode;t.pendingContext?cc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cc(e,t.context,!1),su(e,t.containerInfo)}function Rc(e,t,r,n,s){return kn(),Xl(s),t.flags|=256,Ie(e,t,r,n),t.child}var ol={dehydrated:null,treeContext:null,retryLane:0};function al(e){return{baseLanes:e,cachePool:null,transitions:null}}function gf(e,t,r){var n=t.pendingProps,s=ie.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Y(ie,s&1),e===null)return Za(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_o(o,n,0,null),e=Tr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=al(r),t.memoizedState=ol,e):hu(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Sg(e,t,o,n,a,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=ur(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ur(a,i):(i=Tr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?al(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=ol,n}return i=e.child,e=i.sibling,n=ur(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function hu(e,t){return t=_o({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function li(e,t,r,n){return n!==null&&Xl(n),xn(t,e.child,null,r),e=hu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Sg(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=aa(Error(R(422))),li(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=_o({mode:"visible",children:n.children},s,0,null),i=Tr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&xn(t,e.child,null,o),t.child.memoizedState=al(o),t.memoizedState=ol,i);if(!(t.mode&1))return li(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(R(419)),n=aa(i,n,void 0),li(e,t,o,n)}if(a=(o&e.childLanes)!==0,Be||a){if(n=xe,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Mt(e,s),gt(n,e,s,-1))}return vu(),n=aa(Error(R(421))),li(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Dg.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ge=ir(s.nextSibling),Je=t,ne=!0,pt=null,e!==null&&(nt[st++]=It,nt[st++]=$t,nt[st++]=Or,It=e.id,$t=e.overflow,Or=t),t=hu(t,n.children),t.flags|=4096,t)}function Pc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),el(e.return,t,r)}function la(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function yf(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Ie(e,t,n.children,r),n=ie.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pc(e,r,t);else if(e.tag===19)Pc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Y(ie,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Yi(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),la(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Yi(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}la(t,!0,r,null,i);break;case"together":la(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ji(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ir|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,r=ur(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ur(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function bg(e,t,r){switch(t.tag){case 3:mf(t),kn();break;case 5:Fh(t);break;case 1:Fe(t.type)&&Hi(t);break;case 4:su(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Y(Gi,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Y(ie,ie.current&1),t.flags|=128,null):r&t.child.childLanes?gf(e,t,r):(Y(ie,ie.current&1),e=Bt(e,t,r),e!==null?e.sibling:null);Y(ie,ie.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return yf(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Y(ie,ie.current),n)break;return null;case 22:case 23:return t.lanes=0,ff(e,t,r)}return Bt(e,t,r)}var vf,ll,wf,_f;vf=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ll=function(){};wf=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Cr(Ct.current);var i=null;switch(r){case"input":s=ja(e,s),n=ja(e,n),i=[];break;case"select":s=ae({},s,{value:void 0}),n=ae({},n,{value:void 0}),i=[];break;case"textarea":s=Aa(e,s),n=Aa(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Wi)}$a(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(cs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(cs.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Z("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};_f=function(e,t,r,n){r!==n&&(t.flags|=4)};function Vn(e,t){if(!ne)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function je(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Eg(e,t,r){var n=t.pendingProps;switch(Yl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(t),null;case 1:return Fe(t.type)&&Vi(),je(t),null;case 3:return n=t.stateNode,Sn(),ee(ze),ee(Oe),ou(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(oi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pt!==null&&(gl(pt),pt=null))),ll(e,t),je(t),null;case 5:iu(t);var s=Cr(xs.current);if(r=t.type,e!==null&&t.stateNode!=null)wf(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(R(166));return je(t),null}if(e=Cr(Ct.current),oi(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[bt]=t,n[_s]=i,e=(t.mode&1)!==0,r){case"dialog":Z("cancel",n),Z("close",n);break;case"iframe":case"object":case"embed":Z("load",n);break;case"video":case"audio":for(s=0;s<Yn.length;s++)Z(Yn[s],n);break;case"source":Z("error",n);break;case"img":case"image":case"link":Z("error",n),Z("load",n);break;case"details":Z("toggle",n);break;case"input":Lu(n,i),Z("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Z("invalid",n);break;case"textarea":Mu(n,i),Z("invalid",n)}$a(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&ii(n.textContent,a,e),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ii(n.textContent,a,e),s=["children",""+a]):cs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Z("scroll",n)}switch(r){case"input":Ys(n),Uu(n,i,!0);break;case"textarea":Ys(n),Bu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Wi)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Kd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[bt]=t,e[_s]=n,vf(e,t,!1,!1),t.stateNode=e;e:{switch(o=Da(r,n),r){case"dialog":Z("cancel",e),Z("close",e),s=n;break;case"iframe":case"object":case"embed":Z("load",e),s=n;break;case"video":case"audio":for(s=0;s<Yn.length;s++)Z(Yn[s],e);s=n;break;case"source":Z("error",e),s=n;break;case"img":case"image":case"link":Z("error",e),Z("load",e),s=n;break;case"details":Z("toggle",e),s=n;break;case"input":Lu(e,n),s=ja(e,n),Z("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ae({},n,{value:void 0}),Z("invalid",e);break;case"textarea":Mu(e,n),s=Aa(e,n),Z("invalid",e);break;default:s=n}$a(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Qd(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Gd(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&ds(e,l):typeof l=="number"&&ds(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(cs.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Z("scroll",e):l!=null&&Dl(e,i,l,o))}switch(r){case"input":Ys(e),Uu(e,n,!1);break;case"textarea":Ys(e),Bu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+cr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?hn(e,!!n.multiple,i,!1):n.defaultValue!=null&&hn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Wi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return je(t),null;case 6:if(e&&t.stateNode!=null)_f(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(R(166));if(r=Cr(xs.current),Cr(Ct.current),oi(t)){if(n=t.stateNode,r=t.memoizedProps,n[bt]=t,(i=n.nodeValue!==r)&&(e=Je,e!==null))switch(e.tag){case 3:ii(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ii(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[bt]=t,t.stateNode=n}return je(t),null;case 13:if(ee(ie),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ne&&Ge!==null&&t.mode&1&&!(t.flags&128))Lh(),kn(),t.flags|=98560,i=!1;else if(i=oi(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(R(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[bt]=t}else kn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;je(t),i=!1}else pt!==null&&(gl(pt),pt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ie.current&1?_e===0&&(_e=3):vu())),t.updateQueue!==null&&(t.flags|=4),je(t),null);case 4:return Sn(),ll(e,t),e===null&&vs(t.stateNode.containerInfo),je(t),null;case 10:return tu(t.type._context),je(t),null;case 17:return Fe(t.type)&&Vi(),je(t),null;case 19:if(ee(ie),i=t.memoizedState,i===null)return je(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Vn(i,!1);else{if(_e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Yi(e),o!==null){for(t.flags|=128,Vn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Y(ie,ie.current&1|2),t.child}e=e.sibling}i.tail!==null&&he()>En&&(t.flags|=128,n=!0,Vn(i,!1),t.lanes=4194304)}else{if(!n)if(e=Yi(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Vn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ne)return je(t),null}else 2*he()-i.renderingStartTime>En&&r!==1073741824&&(t.flags|=128,n=!0,Vn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=he(),t.sibling=null,r=ie.current,Y(ie,n?r&1|2:r&1),t):(je(t),null);case 22:case 23:return yu(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ke&1073741824&&(je(t),t.subtreeFlags&6&&(t.flags|=8192)):je(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function Cg(e,t){switch(Yl(t),t.tag){case 1:return Fe(t.type)&&Vi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sn(),ee(ze),ee(Oe),ou(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return iu(t),null;case 13:if(ee(ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));kn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ee(ie),null;case 4:return Sn(),null;case 10:return tu(t.type._context),null;case 22:case 23:return yu(),null;case 24:return null;default:return null}}var ui=!1,Ne=!1,Rg=typeof WeakSet=="function"?WeakSet:Set,O=null;function un(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){de(e,t,n)}else r.current=null}function ul(e,t,r){try{r()}catch(n){de(e,t,n)}}var Tc=!1;function Pg(e,t){if(qa=Bi,e=bh(),Jl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var g;d!==r||s!==0&&d.nodeType!==3||(a=o+s),d!==i||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===e)break t;if(f===r&&++u===s&&(a=o),f===i&&++c===n&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ka={focusedElem:e,selectionRange:r},Bi=!1,O=t;O!==null;)if(t=O,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,O=e;else for(;O!==null;){t=O;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,k=v.memoizedState,m=t.stateNode,p=m.getSnapshotBeforeUpdate(t.elementType===t.type?_:dt(t.type,_),k);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(x){de(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,O=e;break}O=t.return}return v=Tc,Tc=!1,v}function is(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ul(t,r,i)}s=s.next}while(s!==n)}}function vo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function cl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function kf(e){var t=e.alternate;t!==null&&(e.alternate=null,kf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bt],delete t[_s],delete t[Qa],delete t[cg],delete t[dg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xf(e){return e.tag===5||e.tag===3||e.tag===4}function jc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Wi));else if(n!==4&&(e=e.child,e!==null))for(dl(e,t,r),e=e.sibling;e!==null;)dl(e,t,r),e=e.sibling}function hl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(hl(e,t,r),e=e.sibling;e!==null;)hl(e,t,r),e=e.sibling}var Ee=null,ht=!1;function qt(e,t,r){for(r=r.child;r!==null;)Sf(e,t,r),r=r.sibling}function Sf(e,t,r){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(uo,r)}catch{}switch(r.tag){case 5:Ne||un(r,t);case 6:var n=Ee,s=ht;Ee=null,qt(e,t,r),Ee=n,ht=s,Ee!==null&&(ht?(e=Ee,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ee.removeChild(r.stateNode));break;case 18:Ee!==null&&(ht?(e=Ee,r=r.stateNode,e.nodeType===8?ta(e.parentNode,r):e.nodeType===1&&ta(e,r),ms(e)):ta(Ee,r.stateNode));break;case 4:n=Ee,s=ht,Ee=r.stateNode.containerInfo,ht=!0,qt(e,t,r),Ee=n,ht=s;break;case 0:case 11:case 14:case 15:if(!Ne&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ul(r,t,o),s=s.next}while(s!==n)}qt(e,t,r);break;case 1:if(!Ne&&(un(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){de(r,t,a)}qt(e,t,r);break;case 21:qt(e,t,r);break;case 22:r.mode&1?(Ne=(n=Ne)||r.memoizedState!==null,qt(e,t,r),Ne=n):qt(e,t,r);break;default:qt(e,t,r)}}function Nc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Rg),t.forEach(function(n){var s=Lg.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function ut(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ee=a.stateNode,ht=!1;break e;case 3:Ee=a.stateNode.containerInfo,ht=!0;break e;case 4:Ee=a.stateNode.containerInfo,ht=!0;break e}a=a.return}if(Ee===null)throw Error(R(160));Sf(i,o,s),Ee=null,ht=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){de(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bf(t,e),t=t.sibling}function bf(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ut(t,e),_t(e),n&4){try{is(3,e,e.return),vo(3,e)}catch(_){de(e,e.return,_)}try{is(5,e,e.return)}catch(_){de(e,e.return,_)}}break;case 1:ut(t,e),_t(e),n&512&&r!==null&&un(r,r.return);break;case 5:if(ut(t,e),_t(e),n&512&&r!==null&&un(r,r.return),e.flags&32){var s=e.stateNode;try{ds(s,"")}catch(_){de(e,e.return,_)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Hd(s,i),Da(a,o);var u=Da(a,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Qd(s,d):c==="dangerouslySetInnerHTML"?Gd(s,d):c==="children"?ds(s,d):Dl(s,c,d,u)}switch(a){case"input":Na(s,i);break;case"textarea":qd(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?hn(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?hn(s,!!i.multiple,i.defaultValue,!0):hn(s,!!i.multiple,i.multiple?[]:"",!1))}s[_s]=i}catch(_){de(e,e.return,_)}}break;case 6:if(ut(t,e),_t(e),n&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(_){de(e,e.return,_)}}break;case 3:if(ut(t,e),_t(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ms(t.containerInfo)}catch(_){de(e,e.return,_)}break;case 4:ut(t,e),_t(e);break;case 13:ut(t,e),_t(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(mu=he())),n&4&&Nc(e);break;case 22:if(c=r!==null&&r.memoizedState!==null,e.mode&1?(Ne=(u=Ne)||c,ut(t,e),Ne=u):ut(t,e),_t(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(O=e,c=e.child;c!==null;){for(d=O=c;O!==null;){switch(f=O,g=f.child,f.tag){case 0:case 11:case 14:case 15:is(4,f,f.return);break;case 1:un(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(_){de(n,r,_)}}break;case 5:un(f,f.return);break;case 22:if(f.memoizedState!==null){Ac(d);continue}}g!==null?(g.return=f,O=g):Ac(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Jd("display",o))}catch(_){de(e,e.return,_)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){de(e,e.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ut(t,e),_t(e),n&4&&Nc(e);break;case 21:break;default:ut(t,e),_t(e)}}function _t(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(xf(r)){var n=r;break e}r=r.return}throw Error(R(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ds(s,""),n.flags&=-33);var i=jc(e);hl(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=jc(e);dl(e,a,o);break;default:throw Error(R(161))}}catch(l){de(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Tg(e,t,r){O=e,Ef(e)}function Ef(e,t,r){for(var n=(e.mode&1)!==0;O!==null;){var s=O,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ui;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ne;a=ui;var u=Ne;if(ui=o,(Ne=l)&&!u)for(O=s;O!==null;)o=O,l=o.child,o.tag===22&&o.memoizedState!==null?Ic(s):l!==null?(l.return=o,O=l):Ic(s);for(;i!==null;)O=i,Ef(i),i=i.sibling;O=s,ui=a,Ne=u}Oc(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,O=i):Oc(e)}}function Oc(e){for(;O!==null;){var t=O;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ne||vo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ne)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:dt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&gc(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}gc(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&ms(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ne||t.flags&512&&cl(t)}catch(f){de(t,t.return,f)}}if(t===e){O=null;break}if(r=t.sibling,r!==null){r.return=t.return,O=r;break}O=t.return}}function Ac(e){for(;O!==null;){var t=O;if(t===e){O=null;break}var r=t.sibling;if(r!==null){r.return=t.return,O=r;break}O=t.return}}function Ic(e){for(;O!==null;){var t=O;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{vo(4,t)}catch(l){de(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){de(t,s,l)}}var i=t.return;try{cl(t)}catch(l){de(t,i,l)}break;case 5:var o=t.return;try{cl(t)}catch(l){de(t,o,l)}}}catch(l){de(t,t.return,l)}if(t===e){O=null;break}var a=t.sibling;if(a!==null){a.return=t.return,O=a;break}O=t.return}}var jg=Math.ceil,eo=zt.ReactCurrentDispatcher,fu=zt.ReactCurrentOwner,ot=zt.ReactCurrentBatchConfig,H=0,xe=null,me=null,Ce=0,Ke=0,cn=fr(0),_e=0,Cs=null,Ir=0,wo=0,pu=0,os=null,Me=null,mu=0,En=1/0,Nt=null,to=!1,fl=null,ar=null,ci=!1,er=null,ro=0,as=0,pl=null,Ni=-1,Oi=0;function $e(){return H&6?he():Ni!==-1?Ni:Ni=he()}function lr(e){return e.mode&1?H&2&&Ce!==0?Ce&-Ce:fg.transition!==null?(Oi===0&&(Oi=lh()),Oi):(e=K,e!==0||(e=window.event,e=e===void 0?16:mh(e.type)),e):1}function gt(e,t,r,n){if(50<as)throw as=0,pl=null,Error(R(185));Ds(e,r,n),(!(H&2)||e!==xe)&&(e===xe&&(!(H&2)&&(wo|=r),_e===4&&Yt(e,Ce)),We(e,n),r===1&&H===0&&!(t.mode&1)&&(En=he()+500,mo&&pr()))}function We(e,t){var r=e.callbackNode;fm(e,t);var n=Mi(e,e===xe?Ce:0);if(n===0)r!==null&&Wu(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Wu(r),t===1)e.tag===0?hg($c.bind(null,e)):Ih($c.bind(null,e)),lg(function(){!(H&6)&&pr()}),r=null;else{switch(uh(n)){case 1:r=zl;break;case 4:r=oh;break;case 16:r=Ui;break;case 536870912:r=ah;break;default:r=Ui}r=Af(r,Cf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Cf(e,t){if(Ni=-1,Oi=0,H&6)throw Error(R(327));var r=e.callbackNode;if(yn()&&e.callbackNode!==r)return null;var n=Mi(e,e===xe?Ce:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=no(e,n);else{t=n;var s=H;H|=2;var i=Pf();(xe!==e||Ce!==t)&&(Nt=null,En=he()+500,Pr(e,t));do try{Ag();break}catch(a){Rf(e,a)}while(!0);eu(),eo.current=i,H=s,me!==null?t=0:(xe=null,Ce=0,t=_e)}if(t!==0){if(t===2&&(s=za(e),s!==0&&(n=s,t=ml(e,s))),t===1)throw r=Cs,Pr(e,0),Yt(e,n),We(e,he()),r;if(t===6)Yt(e,n);else{if(s=e.current.alternate,!(n&30)&&!Ng(s)&&(t=no(e,n),t===2&&(i=za(e),i!==0&&(n=i,t=ml(e,i))),t===1))throw r=Cs,Pr(e,0),Yt(e,n),We(e,he()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(R(345));case 2:wr(e,Me,Nt);break;case 3:if(Yt(e,n),(n&130023424)===n&&(t=mu+500-he(),10<t)){if(Mi(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){$e(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ja(wr.bind(null,e,Me,Nt),t);break}wr(e,Me,Nt);break;case 4:if(Yt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-mt(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=he()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*jg(n/1960))-n,10<n){e.timeoutHandle=Ja(wr.bind(null,e,Me,Nt),n);break}wr(e,Me,Nt);break;case 5:wr(e,Me,Nt);break;default:throw Error(R(329))}}}return We(e,he()),e.callbackNode===r?Cf.bind(null,e):null}function ml(e,t){var r=os;return e.current.memoizedState.isDehydrated&&(Pr(e,t).flags|=256),e=no(e,t),e!==2&&(t=Me,Me=r,t!==null&&gl(t)),e}function gl(e){Me===null?Me=e:Me.push.apply(Me,e)}function Ng(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!yt(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yt(e,t){for(t&=~pu,t&=~wo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-mt(t),n=1<<r;e[r]=-1,t&=~n}}function $c(e){if(H&6)throw Error(R(327));yn();var t=Mi(e,0);if(!(t&1))return We(e,he()),null;var r=no(e,t);if(e.tag!==0&&r===2){var n=za(e);n!==0&&(t=n,r=ml(e,n))}if(r===1)throw r=Cs,Pr(e,0),Yt(e,t),We(e,he()),r;if(r===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wr(e,Me,Nt),We(e,he()),null}function gu(e,t){var r=H;H|=1;try{return e(t)}finally{H=r,H===0&&(En=he()+500,mo&&pr())}}function $r(e){er!==null&&er.tag===0&&!(H&6)&&yn();var t=H;H|=1;var r=ot.transition,n=K;try{if(ot.transition=null,K=1,e)return e()}finally{K=n,ot.transition=r,H=t,!(H&6)&&pr()}}function yu(){Ke=cn.current,ee(cn)}function Pr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ag(r)),me!==null)for(r=me.return;r!==null;){var n=r;switch(Yl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Vi();break;case 3:Sn(),ee(ze),ee(Oe),ou();break;case 5:iu(n);break;case 4:Sn();break;case 13:ee(ie);break;case 19:ee(ie);break;case 10:tu(n.type._context);break;case 22:case 23:yu()}r=r.return}if(xe=e,me=e=ur(e.current,null),Ce=Ke=t,_e=0,Cs=null,pu=wo=Ir=0,Me=os=null,Er!==null){for(t=0;t<Er.length;t++)if(r=Er[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Er=null}return e}function Rf(e,t){do{var r=me;try{if(eu(),Pi.current=Zi,Xi){for(var n=oe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Xi=!1}if(Ar=0,ke=we=oe=null,ss=!1,Ss=0,fu.current=null,r===null||r.return===null){_e=1,Cs=t,me=null;break}e:{var i=e,o=r.return,a=r,l=t;if(t=Ce,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=xc(o);if(g!==null){g.flags&=-257,Sc(g,o,a,i,t),g.mode&1&&kc(i,u,t),t=g,l=u;var v=t.updateQueue;if(v===null){var _=new Set;_.add(l),t.updateQueue=_}else v.add(l);break e}else{if(!(t&1)){kc(i,u,t),vu();break e}l=Error(R(426))}}else if(ne&&a.mode&1){var k=xc(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Sc(k,o,a,i,t),Xl(bn(l,a));break e}}i=l=bn(l,a),_e!==4&&(_e=2),os===null?os=[i]:os.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=cf(i,l,t);mc(i,m);break e;case 1:a=l;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ar===null||!ar.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=df(i,a,t);mc(i,x);break e}}i=i.return}while(i!==null)}jf(r)}catch(P){t=P,me===r&&r!==null&&(me=r=r.return);continue}break}while(!0)}function Pf(){var e=eo.current;return eo.current=Zi,e===null?Zi:e}function vu(){(_e===0||_e===3||_e===2)&&(_e=4),xe===null||!(Ir&268435455)&&!(wo&268435455)||Yt(xe,Ce)}function no(e,t){var r=H;H|=2;var n=Pf();(xe!==e||Ce!==t)&&(Nt=null,Pr(e,t));do try{Og();break}catch(s){Rf(e,s)}while(!0);if(eu(),H=r,eo.current=n,me!==null)throw Error(R(261));return xe=null,Ce=0,_e}function Og(){for(;me!==null;)Tf(me)}function Ag(){for(;me!==null&&!sm();)Tf(me)}function Tf(e){var t=Of(e.alternate,e,Ke);e.memoizedProps=e.pendingProps,t===null?jf(e):me=t,fu.current=null}function jf(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Cg(r,t),r!==null){r.flags&=32767,me=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_e=6,me=null;return}}else if(r=Eg(r,t,Ke),r!==null){me=r;return}if(t=t.sibling,t!==null){me=t;return}me=t=e}while(t!==null);_e===0&&(_e=5)}function wr(e,t,r){var n=K,s=ot.transition;try{ot.transition=null,K=1,Ig(e,t,r,n)}finally{ot.transition=s,K=n}return null}function Ig(e,t,r,n){do yn();while(er!==null);if(H&6)throw Error(R(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(pm(e,i),e===xe&&(me=xe=null,Ce=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ci||(ci=!0,Af(Ui,function(){return yn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ot.transition,ot.transition=null;var o=K;K=1;var a=H;H|=4,fu.current=null,Pg(e,r),bf(r,e),eg(Ka),Bi=!!qa,Ka=qa=null,e.current=r,Tg(r),im(),H=a,K=o,ot.transition=i}else e.current=r;if(ci&&(ci=!1,er=e,ro=s),i=e.pendingLanes,i===0&&(ar=null),lm(r.stateNode),We(e,he()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(to)throw to=!1,e=fl,fl=null,e;return ro&1&&e.tag!==0&&yn(),i=e.pendingLanes,i&1?e===pl?as++:(as=0,pl=e):as=0,pr(),null}function yn(){if(er!==null){var e=uh(ro),t=ot.transition,r=K;try{if(ot.transition=null,K=16>e?16:e,er===null)var n=!1;else{if(e=er,er=null,ro=0,H&6)throw Error(R(331));var s=H;for(H|=4,O=e.current;O!==null;){var i=O,o=i.child;if(O.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(O=u;O!==null;){var c=O;switch(c.tag){case 0:case 11:case 15:is(8,c,i)}var d=c.child;if(d!==null)d.return=c,O=d;else for(;O!==null;){c=O;var f=c.sibling,g=c.return;if(kf(c),c===u){O=null;break}if(f!==null){f.return=g,O=f;break}O=g}}}var v=i.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var k=_.sibling;_.sibling=null,_=k}while(_!==null)}}O=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,O=o;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:is(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,O=m;break e}O=i.return}}var p=e.current;for(O=p;O!==null;){o=O;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,O=y;else e:for(o=p;O!==null;){if(a=O,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vo(9,a)}}catch(P){de(a,a.return,P)}if(a===o){O=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,O=x;break e}O=a.return}}if(H=s,pr(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(uo,e)}catch{}n=!0}return n}finally{K=r,ot.transition=t}}return!1}function Dc(e,t,r){t=bn(r,t),t=cf(e,t,1),e=or(e,t,1),t=$e(),e!==null&&(Ds(e,1,t),We(e,t))}function de(e,t,r){if(e.tag===3)Dc(e,e,r);else for(;t!==null;){if(t.tag===3){Dc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ar===null||!ar.has(n))){e=bn(r,e),e=df(t,e,1),t=or(t,e,1),e=$e(),t!==null&&(Ds(t,1,e),We(t,e));break}}t=t.return}}function $g(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=$e(),e.pingedLanes|=e.suspendedLanes&r,xe===e&&(Ce&r)===r&&(_e===4||_e===3&&(Ce&130023424)===Ce&&500>he()-mu?Pr(e,0):pu|=r),We(e,t)}function Nf(e,t){t===0&&(e.mode&1?(t=ei,ei<<=1,!(ei&130023424)&&(ei=4194304)):t=1);var r=$e();e=Mt(e,t),e!==null&&(Ds(e,t,r),We(e,r))}function Dg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Nf(e,r)}function Lg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(R(314))}n!==null&&n.delete(t),Nf(e,r)}var Of;Of=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ze.current)Be=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Be=!1,bg(e,t,r);Be=!!(e.flags&131072)}else Be=!1,ne&&t.flags&1048576&&$h(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ji(e,t),e=t.pendingProps;var s=_n(t,Oe.current);gn(t,r),s=lu(null,t,n,e,s,r);var i=uu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fe(n)?(i=!0,Hi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,nu(t),s.updater=yo,t.stateNode=s,s._reactInternals=t,rl(t,n,e,r),t=il(null,t,n,!0,i,r)):(t.tag=0,ne&&i&&Ql(t),Ie(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ji(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Mg(n),e=dt(n,e),s){case 0:t=sl(null,t,n,e,r);break e;case 1:t=Cc(null,t,n,e,r);break e;case 11:t=bc(null,t,n,e,r);break e;case 14:t=Ec(null,t,n,dt(n.type,e),r);break e}throw Error(R(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dt(n,s),sl(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dt(n,s),Cc(e,t,n,s,r);case 3:e:{if(mf(t),e===null)throw Error(R(387));n=t.pendingProps,i=t.memoizedState,s=i.element,zh(e,t),Qi(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=bn(Error(R(423)),t),t=Rc(e,t,n,r,s);break e}else if(n!==s){s=bn(Error(R(424)),t),t=Rc(e,t,n,r,s);break e}else for(Ge=ir(t.stateNode.containerInfo.firstChild),Je=t,ne=!0,pt=null,r=Mh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(kn(),n===s){t=Bt(e,t,r);break e}Ie(e,t,n,r)}t=t.child}return t;case 5:return Fh(t),e===null&&Za(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ga(n,s)?o=null:i!==null&&Ga(n,i)&&(t.flags|=32),pf(e,t),Ie(e,t,o,r),t.child;case 6:return e===null&&Za(t),null;case 13:return gf(e,t,r);case 4:return su(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=xn(t,null,n,r):Ie(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dt(n,s),bc(e,t,n,s,r);case 7:return Ie(e,t,t.pendingProps,r),t.child;case 8:return Ie(e,t,t.pendingProps.children,r),t.child;case 12:return Ie(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Y(Gi,n._currentValue),n._currentValue=o,i!==null)if(yt(i.value,o)){if(i.children===s.children&&!ze.current){t=Bt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Dt(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),el(i.return,r,t),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(R(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),el(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ie(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,gn(t,r),s=at(s),n=n(s),t.flags|=1,Ie(e,t,n,r),t.child;case 14:return n=t.type,s=dt(n,t.pendingProps),s=dt(n.type,s),Ec(e,t,n,s,r);case 15:return hf(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dt(n,s),ji(e,t),t.tag=1,Fe(n)?(e=!0,Hi(t)):e=!1,gn(t,r),uf(t,n,s),rl(t,n,s,r),il(null,t,n,!0,e,r);case 19:return yf(e,t,r);case 22:return ff(e,t,r)}throw Error(R(156,t.tag))};function Af(e,t){return ih(e,t)}function Ug(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(e,t,r,n){return new Ug(e,t,r,n)}function wu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mg(e){if(typeof e=="function")return wu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ul)return 11;if(e===Ml)return 14}return 2}function ur(e,t){var r=e.alternate;return r===null?(r=it(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ai(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")wu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Zr:return Tr(r.children,s,i,t);case Ll:o=8,s|=8;break;case Ca:return e=it(12,r,t,s|2),e.elementType=Ca,e.lanes=i,e;case Ra:return e=it(13,r,t,s),e.elementType=Ra,e.lanes=i,e;case Pa:return e=it(19,r,t,s),e.elementType=Pa,e.lanes=i,e;case Fd:return _o(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Bd:o=10;break e;case zd:o=9;break e;case Ul:o=11;break e;case Ml:o=14;break e;case Kt:o=16,n=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=it(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Tr(e,t,r,n){return e=it(7,e,n,t),e.lanes=r,e}function _o(e,t,r,n){return e=it(22,e,n,t),e.elementType=Fd,e.lanes=r,e.stateNode={isHidden:!1},e}function ua(e,t,r){return e=it(6,e,null,t),e.lanes=r,e}function ca(e,t,r){return t=it(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bg(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vo(0),this.expirationTimes=Vo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vo(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _u(e,t,r,n,s,i,o,a,l){return e=new Bg(e,t,r,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=it(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nu(i),e}function zg(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function If(e){if(!e)return dr;e=e._reactInternals;e:{if(Lr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var r=e.type;if(Fe(r))return Ah(e,r,t)}return t}function $f(e,t,r,n,s,i,o,a,l){return e=_u(r,n,!0,e,s,i,o,a,l),e.context=If(null),r=e.current,n=$e(),s=lr(r),i=Dt(n,s),i.callback=t??null,or(r,i,s),e.current.lanes=s,Ds(e,s,n),We(e,n),e}function ko(e,t,r,n){var s=t.current,i=$e(),o=lr(s);return r=If(r),t.context===null?t.context=r:t.pendingContext=r,t=Dt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=or(s,t,o),e!==null&&(gt(e,s,o,i),Ri(e,s,o)),o}function so(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ku(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}function Fg(){return null}var Df=typeof reportError=="function"?reportError:function(e){console.error(e)};function xu(e){this._internalRoot=e}xo.prototype.render=xu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));ko(e,t,null,null)};xo.prototype.unmount=xu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$r(function(){ko(null,e,null,null)}),t[Ut]=null}};function xo(e){this._internalRoot=e}xo.prototype.unstable_scheduleHydration=function(e){if(e){var t=hh();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Qt.length&&t!==0&&t<Qt[r].priority;r++);Qt.splice(r,0,e),r===0&&ph(e)}};function Su(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function So(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Uc(){}function Wg(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=so(o);i.call(u)}}var o=$f(t,n,e,0,null,!1,!1,"",Uc);return e._reactRootContainer=o,e[Ut]=o.current,vs(e.nodeType===8?e.parentNode:e),$r(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=so(l);a.call(u)}}var l=_u(e,0,!1,null,null,!1,!1,"",Uc);return e._reactRootContainer=l,e[Ut]=l.current,vs(e.nodeType===8?e.parentNode:e),$r(function(){ko(t,l,r,n)}),l}function bo(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=so(o);a.call(l)}}ko(t,o,e,s)}else o=Wg(r,t,e,s,n);return so(o)}ch=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Qn(t.pendingLanes);r!==0&&(Fl(t,r|1),We(t,he()),!(H&6)&&(En=he()+500,pr()))}break;case 13:$r(function(){var n=Mt(e,1);if(n!==null){var s=$e();gt(n,e,1,s)}}),ku(e,1)}};Wl=function(e){if(e.tag===13){var t=Mt(e,134217728);if(t!==null){var r=$e();gt(t,e,134217728,r)}ku(e,134217728)}};dh=function(e){if(e.tag===13){var t=lr(e),r=Mt(e,t);if(r!==null){var n=$e();gt(r,e,t,n)}ku(e,t)}};hh=function(){return K};fh=function(e,t){var r=K;try{return K=e,t()}finally{K=r}};Ua=function(e,t,r){switch(t){case"input":if(Na(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=po(n);if(!s)throw Error(R(90));Vd(n),Na(n,s)}}}break;case"textarea":qd(e,r);break;case"select":t=r.value,t!=null&&hn(e,!!r.multiple,t,!1)}};Zd=gu;eh=$r;var Vg={usingClientEntryPoint:!1,Events:[Us,nn,po,Yd,Xd,gu]},Hn={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hg={bundleType:Hn.bundleType,version:Hn.version,rendererPackageName:Hn.rendererPackageName,rendererConfig:Hn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nh(e),e===null?null:e.stateNode},findFiberByHostInstance:Hn.findFiberByHostInstance||Fg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var di=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!di.isDisabled&&di.supportsFiber)try{uo=di.inject(Hg),Et=di}catch{}}Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vg;Ye.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Su(t))throw Error(R(200));return zg(e,t,null,r)};Ye.createRoot=function(e,t){if(!Su(e))throw Error(R(299));var r=!1,n="",s=Df;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=_u(e,1,!1,null,null,r,!1,n,s),e[Ut]=t.current,vs(e.nodeType===8?e.parentNode:e),new xu(t)};Ye.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=nh(t),e=e===null?null:e.stateNode,e};Ye.flushSync=function(e){return $r(e)};Ye.hydrate=function(e,t,r){if(!So(t))throw Error(R(200));return bo(null,e,t,!0,r)};Ye.hydrateRoot=function(e,t,r){if(!Su(e))throw Error(R(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Df;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=$f(t,null,e,1,r??null,s,!1,i,o),e[Ut]=t.current,vs(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new xo(t)};Ye.render=function(e,t,r){if(!So(t))throw Error(R(200));return bo(null,e,t,!1,r)};Ye.unmountComponentAtNode=function(e){if(!So(e))throw Error(R(40));return e._reactRootContainer?($r(function(){bo(null,null,e,!1,function(){e._reactRootContainer=null,e[Ut]=null})}),!0):!1};Ye.unstable_batchedUpdates=gu;Ye.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!So(r))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return bo(e,t,r,!1,n)};Ye.version="18.3.1-next-f1338f8080-20240426";function Lf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lf)}catch(e){console.error(e)}}Lf(),Dd.exports=Ye;var qg=Dd.exports,Mc=qg;ba.createRoot=Mc.createRoot,ba.hydrateRoot=Mc.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rs(){return Rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rs.apply(this,arguments)}var tr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(tr||(tr={}));const Bc="popstate";function Kg(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:a}=n.location;return yl("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Uf(s)}return Jg(t,r,null,e)}function ge(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Gg(){return Math.random().toString(36).substr(2,8)}function zc(e,t){return{usr:e.state,key:e.key,idx:t}}function yl(e,t,r,n){return r===void 0&&(r=null),Rs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jn(t):t,{state:r,key:t&&t.key||n||Gg()})}function Uf(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function jn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Jg(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a=tr.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Rs({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=tr.Pop;let k=c(),m=k==null?null:k-u;u=k,l&&l({action:a,location:_.location,delta:m})}function f(k,m){a=tr.Push;let p=yl(_.location,k,m);u=c()+1;let y=zc(p,u),x=_.createHref(p);try{o.pushState(y,"",x)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(x)}i&&l&&l({action:a,location:_.location,delta:1})}function g(k,m){a=tr.Replace;let p=yl(_.location,k,m);u=c();let y=zc(p,u),x=_.createHref(p);o.replaceState(y,"",x),i&&l&&l({action:a,location:_.location,delta:0})}function v(k){let m=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof k=="string"?k:Uf(k);return p=p.replace(/ $/,"%20"),ge(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let _={get action(){return a},get location(){return e(s,o)},listen(k){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Bc,d),l=k,()=>{s.removeEventListener(Bc,d),l=null}},createHref(k){return t(s,k)},createURL:v,encodeLocation(k){let m=v(k);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:g,go(k){return o.go(k)}};return _}var Fc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Fc||(Fc={}));function Qg(e,t,r){return r===void 0&&(r="/"),Yg(e,t,r)}function Yg(e,t,r,n){let s=typeof t=="string"?jn(t):t,i=zf(s.pathname||"/",r);if(i==null)return null;let o=Mf(e);Xg(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=cy(i);a=ay(o[l],u)}return a}function Mf(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ge(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=jr([n,l.relativePath]),c=r.concat(l);i.children&&i.children.length>0&&(ge(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Mf(i.children,t,c,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:iy(u,i.index),routesMeta:c})};return e.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Bf(i.path))s(i,o,l)}),t}function Bf(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Bf(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function Xg(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:oy(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Zg=/^:[\w-]+$/,ey=3,ty=2,ry=1,ny=10,sy=-2,Wc=e=>e==="*";function iy(e,t){let r=e.split("/"),n=r.length;return r.some(Wc)&&(n+=sy),t&&(n+=ty),r.filter(s=>!Wc(s)).reduce((s,i)=>s+(Zg.test(i)?ey:i===""?ry:ny),n)}function oy(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function ay(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,c=i==="/"?t:t.slice(i.length)||"/",d=ly({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:jr([i,d.pathname]),pathnameBase:my(jr([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=jr([i,d.pathnameBase]))}return o}function ly(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=uy(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,c,d)=>{let{paramName:f,isOptional:g}=c;if(f==="*"){let _=a[d]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const v=a[d];return g&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function uy(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),bu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function cy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return bu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function zf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const dy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hy=e=>dy.test(e);function fy(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?jn(e):e,i;if(r)if(hy(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),bu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=Vc(r.substring(1),"/"):i=Vc(r,t)}else i=t;return{pathname:i,search:gy(n),hash:yy(s)}}function Vc(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function da(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function py(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ff(e,t){let r=py(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Wf(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=jn(e):(s=Rs({},e),ge(!s.pathname||!s.pathname.includes("?"),da("?","pathname","search",s)),ge(!s.pathname||!s.pathname.includes("#"),da("#","pathname","hash",s)),ge(!s.search||!s.search.includes("#"),da("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let d=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?t[d]:"/"}let l=fy(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const jr=e=>e.join("/").replace(/\/\/+/g,"/"),my=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Vf=["post","put","patch","delete"];new Set(Vf);const wy=["get",...Vf];new Set(wy);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ps(){return Ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ps.apply(this,arguments)}const Eu=S.createContext(null),_y=S.createContext(null),Bs=S.createContext(null),Eo=S.createContext(null),Ur=S.createContext({outlet:null,matches:[],isDataRoute:!1}),Hf=S.createContext(null);function zs(){return S.useContext(Eo)!=null}function Co(){return zs()||ge(!1),S.useContext(Eo).location}function qf(e){S.useContext(Bs).static||S.useLayoutEffect(e)}function Ro(){let{isDataRoute:e}=S.useContext(Ur);return e?Ay():ky()}function ky(){zs()||ge(!1);let e=S.useContext(Eu),{basename:t,future:r,navigator:n}=S.useContext(Bs),{matches:s}=S.useContext(Ur),{pathname:i}=Co(),o=JSON.stringify(Ff(s,r.v7_relativeSplatPath)),a=S.useRef(!1);return qf(()=>{a.current=!0}),S.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){n.go(u);return}let d=Wf(u,JSON.parse(o),i,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:jr([t,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[t,n,o,i,e])}function xy(e,t){return Sy(e,t)}function Sy(e,t,r,n){zs()||ge(!1);let{navigator:s}=S.useContext(Bs),{matches:i}=S.useContext(Ur),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Co(),c;if(t){var d;let k=typeof t=="string"?jn(t):t;l==="/"||(d=k.pathname)!=null&&d.startsWith(l)||ge(!1),c=k}else c=u;let f=c.pathname||"/",g=f;if(l!=="/"){let k=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(k.length).join("/")}let v=Qg(e,{pathname:g}),_=Py(v&&v.map(k=>Object.assign({},k,{params:Object.assign({},a,k.params),pathname:jr([l,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?l:jr([l,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,r,n);return t&&_?S.createElement(Eo.Provider,{value:{location:Ps({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:tr.Pop}},_):_}function by(){let e=Oy(),t=vy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),r?S.createElement("pre",{style:s},r):null,null)}const Ey=S.createElement(by,null);class Cy extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?S.createElement(Ur.Provider,{value:this.props.routeContext},S.createElement(Hf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ry(e){let{routeContext:t,match:r,children:n}=e,s=S.useContext(Eu);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(Ur.Provider,{value:t},n)}function Py(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,a=(s=r)==null?void 0:s.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||ge(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:g}=r,v=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let g,v=!1,_=null,k=null;r&&(g=a&&d.route.id?a[d.route.id]:void 0,_=d.route.errorElement||Ey,l&&(u<0&&f===0?(Iy("route-fallback"),v=!0,k=null):u===f&&(v=!0,k=d.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,f+1)),p=()=>{let y;return g?y=_:v?y=k:d.route.Component?y=S.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=c,S.createElement(Ry,{match:d,routeContext:{outlet:c,matches:m,isDataRoute:r!=null},children:y})};return r&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?S.createElement(Cy,{location:r.location,revalidation:r.revalidation,component:_,error:g,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var Kf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Kf||{}),Gf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Gf||{});function Ty(e){let t=S.useContext(Eu);return t||ge(!1),t}function jy(e){let t=S.useContext(_y);return t||ge(!1),t}function Ny(e){let t=S.useContext(Ur);return t||ge(!1),t}function Jf(e){let t=Ny(),r=t.matches[t.matches.length-1];return r.route.id||ge(!1),r.route.id}function Oy(){var e;let t=S.useContext(Hf),r=jy(),n=Jf();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Ay(){let{router:e}=Ty(Kf.UseNavigateStable),t=Jf(Gf.UseNavigateStable),r=S.useRef(!1);return qf(()=>{r.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ps({fromRouteId:t},i)))},[e,t])}const Hc={};function Iy(e,t,r){Hc[e]||(Hc[e]=!0)}function $y(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Dy(e){let{to:t,replace:r,state:n,relative:s}=e;zs()||ge(!1);let{future:i,static:o}=S.useContext(Bs),{matches:a}=S.useContext(Ur),{pathname:l}=Co(),u=Ro(),c=Wf(t,Ff(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(c);return S.useEffect(()=>u(JSON.parse(d),{replace:r,state:n,relative:s}),[u,d,s,r,n]),null}function _r(e){ge(!1)}function Ly(e){let{basename:t="/",children:r=null,location:n,navigationType:s=tr.Pop,navigator:i,static:o=!1,future:a}=e;zs()&&ge(!1);let l=t.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:l,navigator:i,static:o,future:Ps({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof n=="string"&&(n=jn(n));let{pathname:c="/",search:d="",hash:f="",state:g=null,key:v="default"}=n,_=S.useMemo(()=>{let k=zf(c,l);return k==null?null:{location:{pathname:k,search:d,hash:f,state:g,key:v},navigationType:s}},[l,c,d,f,g,v,s]);return _==null?null:S.createElement(Bs.Provider,{value:u},S.createElement(Eo.Provider,{children:r,value:_}))}function Uy(e){let{children:t,location:r}=e;return xy(vl(t),r)}new Promise(()=>{});function vl(e,t){t===void 0&&(t=[]);let r=[];return S.Children.forEach(e,(n,s)=>{if(!S.isValidElement(n))return;let i=[...t,s];if(n.type===S.Fragment){r.push.apply(r,vl(n.props.children,i));return}n.type!==_r&&ge(!1),!n.props.index||!n.props.children||ge(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=vl(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const My="6";try{window.__reactRouterVersion=My}catch{}const By="startTransition",qc=$p[By];function zy(e){let{basename:t,children:r,future:n,window:s}=e,i=S.useRef();i.current==null&&(i.current=Kg({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},c=S.useCallback(d=>{u&&qc?qc(()=>l(d)):l(d)},[l,u]);return S.useLayoutEffect(()=>o.listen(c),[o,c]),S.useEffect(()=>$y(n),[n]),S.createElement(Ly,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}var Kc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Kc||(Kc={}));var Gc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Gc||(Gc={}));function Qf(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Qf(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function St(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Qf(e))&&(n&&(n+=" "),n+=t);return n}function Po(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Fy(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((n=n.apply(e,t||[])).next())})}const Wy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Cu extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Vy extends Cu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Jc extends Cu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Qc extends Cu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var wl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(wl||(wl={}));class Hy{constructor(t,{headers:r={},customFetch:n,region:s=wl.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Wy(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Fy(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:a,method:l,body:u,signal:c,timeout:d}=n;let f={},{region:g}=n;g||(g=this.region);const v=new URL(`${this.url}/${r}`);g&&g!=="any"&&(f["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let _;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",_=u):typeof u=="string"?(f["Content-Type"]="text/plain",_=u):typeof FormData<"u"&&u instanceof FormData?_=u:(f["Content-Type"]="application/json",_=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?_=JSON.stringify(u):_=u;let k=c;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),c?(k=o.signal,c.addEventListener("abort",()=>o.abort())):k=o.signal);const m=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:_,signal:k}).catch(P=>{throw new Vy(P)}),p=m.headers.get("x-relay-error");if(p&&p==="true")throw new Jc(m);if(!m.ok)throw new Qc(m);let y=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return y==="application/json"?x=yield m.json():y==="application/octet-stream"||y==="application/pdf"?x=yield m.blob():y==="text/event-stream"?x=m:y==="multipart/form-data"?x=yield m.formData():x=yield m.text(),{data:x,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof Qc||a instanceof Jc?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var qy=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Ky=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,u=i.status,c=i.statusText;if(i.ok){var d,f;if(r.method!=="HEAD"){var g;const m=await i.text();m===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((g=r.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?a=m:a=JSON.parse(m))}const _=(d=r.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),k=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");_&&k&&k.length>1&&(l=parseInt(k[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,c="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var v;const _=await i.text();try{o=JSON.parse(_),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,c="OK")}catch{i.status===404&&_===""?(u=204,c="No Content"):o={message:_}}if(o&&r.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,u=200,c="OK"),o&&r.shouldThrowOnError)throw new qy(o)}return{error:o,data:a,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var u,c,d,f;const v=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",_=(c=l==null?void 0:l.code)!==null&&c!==void 0?c:"";a=`${(d=i==null?void 0:i.name)!==null&&d!==void 0?d:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${v}`,_&&(a+=` (${_})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var g;a=(g=i==null?void 0:i.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},Gy=class extends Ky{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Yc=new RegExp("[,()]");var Jr=class extends Gy{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Yc.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Yc.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},Jy=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),n&&l.append("Prefer",`count=${n}`),new Jr({method:s,url:a,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);i.searchParams.set("columns",l.join(","))}}return new Jr({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),n&&l.append("Prefer",`count=${n}`),s||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);a.searchParams.set("columns",c.join(","))}}return new Jr({method:o,url:a,headers:l,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Jr({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Jr({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Qy=class Yf{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Jy(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Yf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;const c=g=>g!==null&&typeof g=="object"&&(!Array.isArray(g)||g.some(c)),d=n&&Object.values(r).some(c);d?(a="POST",u=r):n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{l.searchParams.append(g,v)})):(a="POST",u=r);const f=new Headers(this.headers);return d?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new Jr({method:a,url:l,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Yy{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Xy="2.93.1",Zy=`realtime-js/${Xy}`,ev="1.0.0",Xf="2.0.0",Xc=Xf,_l=1e4,tv=1e3,rv=100;var Jt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Jt||(Jt={}));var ve;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ve||(ve={}));var ft;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ft||(ft={}));var kl;(function(e){e.websocket="websocket"})(kl||(kl={}));var xr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(xr||(xr={}));class nv{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,a=(s=t.ref)!==null&&s!==void 0?s:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,c=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+d.length,g=new ArrayBuffer(this.HEADER_LENGTH+f);let v=new DataView(g),_=0;v.setUint8(_++,this.KINDS.userBroadcastPush),v.setUint8(_++,l.length),v.setUint8(_++,a.length),v.setUint8(_++,o.length),v.setUint8(_++,u.length),v.setUint8(_++,d.length),v.setUint8(_++,r),Array.from(l,m=>v.setUint8(_++,m.charCodeAt(0))),Array.from(a,m=>v.setUint8(_++,m.charCodeAt(0))),Array.from(o,m=>v.setUint8(_++,m.charCodeAt(0))),Array.from(u,m=>v.setUint8(_++,m.charCodeAt(0))),Array.from(d,m=>v.setUint8(_++,m.charCodeAt(0)));var k=new Uint8Array(g.byteLength+n.byteLength);return k.set(new Uint8Array(g),0),k.set(new Uint8Array(n),g.byteLength),k.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,a,l]=n;return r({join_ref:s,ref:i,topic:o,event:a,payload:l})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const u=n.decode(t.slice(l,l+s));l=l+s;const c=n.decode(t.slice(l,l+i));l=l+i;const d=n.decode(t.slice(l,l+o));l=l+o;const f=t.slice(l,t.byteLength),g=a===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,v={type:this.BROADCAST_EVENT,event:c,payload:g};return o>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class Zf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Q;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Q||(Q={}));const Zc=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=sv(o,e,t,s),i),{}):{}},sv=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?ep(i,o):xl(o)},ep=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return lv(t,r)}switch(e){case Q.bool:return iv(t);case Q.float4:case Q.float8:case Q.int2:case Q.int4:case Q.int8:case Q.numeric:case Q.oid:return ov(t);case Q.json:case Q.jsonb:return av(t);case Q.timestamp:return uv(t);case Q.abstime:case Q.date:case Q.daterange:case Q.int4range:case Q.int8range:case Q.money:case Q.reltime:case Q.text:case Q.time:case Q.timestamptz:case Q.timetz:case Q.tsrange:case Q.tstzrange:return xl(t);default:return xl(t)}},xl=e=>e,iv=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ov=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},av=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},lv=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>ep(t,a))}return e},uv=e=>typeof e=="string"?e.replace(" ","T"):e,tp=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ha{constructor(t,r,n={},s=_l){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ed;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ed||(ed={}));class ls{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ls.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=ls.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ls.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=i[u];if(d){const f=c.map(k=>k.presence_ref),g=d.map(k=>k.presence_ref),v=c.filter(k=>g.indexOf(k.presence_ref)<0),_=d.filter(k=>f.indexOf(k.presence_ref)<0);v.length>0&&(a[u]=v),_.length>0&&(l[u]=_)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const d=t[a].map(g=>g.presence_ref),f=c.filter(g=>d.indexOf(g.presence_ref)<0);t[a].unshift(...f)}n(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var td;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(td||(td={}));var us;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(us||(us={}));var Ot;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ot||(Ot={}));class dn{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ha(this,ft.join,this.params,this.timeout),this.rejoinTimer=new Zf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ve.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ft.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new ls(this),this.broadcastEndpointURL=tp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ve.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[us.PRESENCE]&&this.bindings[us.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(Ot.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(Ot.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){t==null||t(Ot.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,k=(v=_==null?void 0:_.length)!==null&&v!==void 0?v:0,m=[];for(let p=0;p<k;p++){const y=_[p],{filter:{event:x,schema:P,table:C,filter:b}}=y,T=g&&g[p];if(T&&T.event===x&&dn.isFilterValueEqual(T.schema,P)&&dn.isFilterValueEqual(T.table,C)&&dn.isFilterValueEqual(T.filter,b))m.push(Object.assign(Object.assign({},y),{id:T.id}));else{this.unsubscribe(),this.state=ve.errored,t==null||t(Ot.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(Ot.SUBSCRIBED);return}}).receive("error",g=>{this.state=ve.errored,t==null||t(Ot.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ot.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ve.joined&&t===us.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ve.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ft.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ha(this,ft.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ve.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ha(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>rv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=ft;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var v,_,k;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((k=(_=g.filter)===null||_===void 0?void 0:_.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(g=>g.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var v,_,k,m,p,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const x=g.id,P=(v=g.filter)===null||v===void 0?void 0:v.event;return x&&((_=r.ids)===null||_===void 0?void 0:_.includes(x))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const x=(p=(m=g==null?void 0:g.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return x==="*"||x===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:_,table:k,commit_timestamp:m,type:p,errors:y}=v;f=Object.assign(Object.assign({},{schema:_,table:k,commit_timestamp:m,eventType:p,new:{},old:{},errors:y}),this._getPayloadRecords(v))}g.callback(f,n)})}_isClosed(){return this.state===ve.closed}_isJoined(){return this.state===ve.joined}_isJoining(){return this.state===ve.joining}_isLeaving(){return this.state===ve.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&dn.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ft.close,{},t)}_onError(t){this._on(ft.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ve.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Zc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Zc(t.columns,t.old_record)),r}}const fa=()=>{},hi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cv=[1e3,2e3,5e3,1e4],dv=1e4,hv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fv{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_l,this.transport=null,this.heartbeatIntervalMs=hi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fa,this.ref=0,this.reconnectTimer=null,this.vsn=Xc,this.logger=fa,this.conn=null,this.sendBuffer=[],this.serializer=new nv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${kl.websocket}`,this.httpEndpoint=tp(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Yy.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Jt.connecting:return xr.Connecting;case Jt.open:return xr.Open;case Jt.closing:return xr.Closing;default:return xr.Closed}}isConnected(){return this.connectionState()===xr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new dn(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(tv,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},hi.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Jt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Jt.open||this.conn.readyState===Jt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(ft.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([hv],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:Zy};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(ft.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Zf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,u,c,d,f,g;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:_l,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:hi.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:fa,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:Xc,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>cv[v-1]||dv,this.vsn){case ev:this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(v,_)=>_(JSON.stringify(v)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(v,_)=>_(JSON.parse(v));break;case Xf:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Ts=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function pv(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function mv(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function gv(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const a=pv(e.baseUrl,n,s),l=await mv(e.auth),u=await t(a,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),c=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),f=d&&c?JSON.parse(c):c;if(!u.ok){const g=d?f:void 0,v=g==null?void 0:g.error;throw new Ts((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:g})}return{status:u.status,headers:u.headers,data:f}}}}function fi(e){return e.join("")}var yv=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:fi(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fi(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fi(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fi(e.namespace)}`}),!0}catch(t){if(t instanceof Ts&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Ts&&r.status===409)return;throw r}}};function Fr(e){return e.join("")}var vv=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fr(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fr(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fr(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fr(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fr(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fr(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Ts&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Ts&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},wv=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=gv({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new yv(this.client,t),this.tableOps=new vv(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},To=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function jo(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var pi=class extends To{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},rp=class extends To{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const _v=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),kv=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Sl=e=>{if(Array.isArray(e))return e.map(r=>Sl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Sl(n)}),t},xv=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function js(e){"@babel/helpers - typeof";return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},js(e)}function Sv(e,t){if(js(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(js(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bv(e){var t=Sv(e,"string");return js(t)=="symbol"?t:t+""}function Ev(e,t,r){return(t=bv(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rd(Object(r),!0).forEach(function(n){Ev(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rd(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const nd=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Cv=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e,i=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";t(new pi(nd(o),i,a,n))}).catch(()=>{if(n==="vectors"){const o=i+"";t(new pi(s.statusText||`HTTP ${i} error`,i,o,n))}else{const o=i+"";t(new pi(s.statusText||`HTTP ${i} error`,i,o,n))}});else{const o=i+"";t(new pi(s.statusText||`HTTP ${i} error`,i,o,n))}}else t(new rp(nd(e),e,n))},Rv=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?U(U({},s),r):(kv(n)?(s.headers=U({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),U(U({},s),r))};async function qn(e,t,r,n,s,i,o){return new Promise((a,l)=>{e(r,Rv(t,n,s,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(o==="vectors"){const c=u.headers.get("content-type");if(!c||!c.includes("application/json"))return{}}return u.json()}).then(u=>a(u)).catch(u=>Cv(u,l,n,o))})}function Pv(e="storage"){return{get:async(t,r,n,s)=>qn(t,"GET",r,n,s,void 0,e),post:async(t,r,n,s,i)=>qn(t,"POST",r,s,i,n,e),put:async(t,r,n,s,i)=>qn(t,"PUT",r,s,i,n,e),head:async(t,r,n,s)=>qn(t,"HEAD",r,U(U({},n),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,r,n,s,i)=>qn(t,"DELETE",r,s,i,n,e)}}const Tv=Pv("storage"),{get:Ns,post:re,put:bl,head:jv,remove:Ru}=Tv;var Nn=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=_v(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(jo(r))return{data:null,error:r};throw r}}},Nv=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jo(t))return{data:null,error:t};throw t}}};let np;np=Symbol.toStringTag;var Ov=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[np]="BlobDownloadBuilder",this.promise=null}asStream(){return new Nv(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jo(t))return{data:null,error:t};throw t}}};const Av={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Iv=class extends Nn{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var s=this;return s.handleOperation(async()=>{let i;const o=U(U({},sd),n);let a=U(U({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(a=U(U({},a),n.headers));const u=s._removeEmptyFolders(t),c=s._getFinalPath(u),d=await(e=="PUT"?bl:re)(s.fetch,`${s.url}/object/${c}`,i,U({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:d.Id,fullPath:d.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",t),s.handleOperation(async()=>{let l;const u=U({upsert:sd.upsert},n),c=U(U({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{path:i,fullPath:(await bl(s.fetch,a.toString(),l,{headers:c})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const s=U({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await re(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),a=o.searchParams.get("token");if(!a)throw new To("No token returned by API");return{signedUrl:o.toString(),path:e,token:a}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await re(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await re(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(e),i=await re(n.fetch,`${n.url}/object/sign/${s}`,U({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const s=await re(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(o=>U(U({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null}))})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>Ns(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new Ov(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>Sl(await Ns(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await jv(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jo(n)&&n instanceof rp){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let a=n.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${a}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Ru(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const s=U(U(U({},Av),t),{},{prefix:e||""});return await re(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=U({},e);return await re(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const $v="2.93.1",Fs={"X-Client-Info":`storage-js/${$v}`};var Dv=class extends Nn{constructor(e,t={},r,n){const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),o=U(U({},Fs),t);super(i,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Ns(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Ns(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await re(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await bl(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await re(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Ru(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Lv=class extends Nn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=U(U({},Fs),t);super(n,s,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await re(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await Ns(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Ru(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!xv(e))throw new To("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new wv({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}},Uv=class extends Nn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=U(U({},Fs),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await re(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await re(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await re(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await re(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},Mv=class extends Nn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=U(U({},Fs),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await re(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await re(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await re(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await re(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await re(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},Bv=class extends Nn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=U(U({},Fs),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await re(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await re(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await re(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await re(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},zv=class extends Bv{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Fv(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},Fv=class extends Uv{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new Wv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Wv=class extends Mv{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,U(U({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Vv=class extends Dv{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Iv(this.url,this.headers,e,this.fetch)}get vectors(){return new zv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Lv(this.url+"/iceberg",this.headers,this.fetch)}};const sp="2.93.1",Qr=30*1e3,El=3,pa=El*Qr,Hv="http://localhost:9999",qv="supabase.auth.token",Kv={"X-Client-Info":`gotrue-js/${sp}`},Cl="X-Supabase-Api-Version",ip={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Gv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Jv=10*60*1e3;class Os extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function A(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Qv extends Os{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Yv(e){return A(e)&&e.name==="AuthApiError"}class Sr extends Os{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ft extends Os{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class qe extends Ft{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ma(e){return A(e)&&e.name==="AuthSessionMissingError"}class Wr extends Ft{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mi extends Ft{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class gi extends Ft{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Xv(e){return A(e)&&e.name==="AuthImplicitGrantRedirectError"}class id extends Ft{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Zv extends Ft{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Rl extends Ft{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ga(e){return A(e)&&e.name==="AuthRetryableFetchError"}class od extends Ft{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Pl extends Ft{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const io="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ad=` 	
\r=`.split(""),e0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ad.length;t+=1)e[ad[t].charCodeAt(0)]=-2;for(let t=0;t<io.length;t+=1)e[io[t].charCodeAt(0)]=t;return e})();function ld(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(io[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(io[n]),t.queuedBits-=6}}function op(e,t,r){const n=e0[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ud(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{n0(o,n,r)};for(let o=0;o<e.length;o+=1)op(e.charCodeAt(o),s,i);return t.join("")}function t0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function r0(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}t0(n,t)}}function n0(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function vn(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)op(e.charCodeAt(s),r,n);return new Uint8Array(t)}function s0(e){const t=[];return r0(e,r=>t.push(r)),new Uint8Array(t)}function Rr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>ld(s,r,n)),ld(null,r,n),t.join("")}function i0(e){return Math.round(Date.now()/1e3)+e}function o0(){return Symbol("auth-callback")}const be=()=>typeof window<"u"&&typeof document<"u",gr={tested:!1,writable:!1},ap=()=>{if(!be())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gr.tested)return gr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),gr.tested=!0,gr.writable=!0}catch{gr.tested=!0,gr.writable=!1}return gr.writable};function a0(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const lp=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),l0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Yr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},yr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Se=async(e,t)=>{await e.removeItem(t)};class No{constructor(){this.promise=new No.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}No.promiseConstructor=Promise;function yi(e){const t=e.split(".");if(t.length!==3)throw new Pl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Gv.test(t[n]))throw new Pl("JWT not in base64url format");return{header:JSON.parse(ud(t[0])),payload:JSON.parse(ud(t[1])),signature:vn(t[2]),raw:{header:t[0],payload:t[1]}}}async function u0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function c0(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function d0(e){return("0"+e.toString(16)).substr(-2)}function h0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,d0).join("")}async function f0(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function p0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await f0(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vr(e,t,r=!1){const n=h0();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Yr(e,`${t}-code-verifier`,s);const i=await p0(n);return[i,n===i?"plain":"s256"]}const m0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function g0(e){const t=e.headers.get(Cl);if(!t||!t.match(m0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function y0(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function v0(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const w0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hr(e){if(!w0.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ya(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _0(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function cd(e){return JSON.parse(JSON.stringify(e))}const kr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),k0=[502,503,504];async function dd(e){var t;if(!l0(e))throw new Rl(kr(e),0);if(k0.includes(e.status))throw new Rl(kr(e),e.status);let r;try{r=await e.json()}catch(i){throw new Sr(kr(i),i)}let n;const s=g0(e);if(s&&s.getTime()>=ip["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new od(kr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new qe}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new od(kr(r),e.status,r.weak_password.reasons);throw new Qv(kr(r),e.status||500,n)}const x0=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function L(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Cl]||(i[Cl]=ip["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await S0(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function S0(e,t,r,n,s,i){const o=x0(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new Rl(kr(l),0)}if(a.ok||await dd(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await dd(l)}}function ct(e){var t;let r=null;C0(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=i0(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function hd(e){const t=ct(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Xt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function b0(e){return{data:e,error:null}}function E0(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=Po(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function fd(e){return e}function C0(e){return e.access_token&&e.refresh_token&&e.expires_in}const va=["global","local","others"];class R0{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=lp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=va[0]){if(va.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${va.join(", ")}`);try{return await L(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(A(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await L(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Xt})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Po(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:E0,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(A(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await L(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Xt})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:fd});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const _=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);u[`${k}Page`]=_}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(A(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Hr(t);try{return await L(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Xt})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Hr(t);try{return await L(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Xt})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Hr(t);try{return await L(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Xt})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Hr(t.userId);try{const{data:r,error:n}=await L(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(A(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Hr(t.userId),Hr(t.id);try{return{data:await L(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(A(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await L(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:fd});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const _=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);u[`${k}Page`]=_}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(A(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(A(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await L(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(A(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await L(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(A(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await L(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(A(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(A(r))return{data:null,error:r};throw r}}}function pd(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const qr={debug:!!(globalThis&&ap()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class up extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class P0 extends up{}async function T0(e,t,r){qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),qr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new P0(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(qr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function j0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function cp(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function N0(e){return parseInt(e,16)}function O0(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function A0(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:d,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=cp(e.address),v=c?`${c}://${n}`:n,_=e.statement?`${e.statement}
`:"",k=`${v} wants you to sign in with your Ethereum account:
${g}

${_}`;let m=`URI: ${d}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(m+=`
Expiration Time: ${s.toISOString()}`),a&&(m+=`
Not Before: ${a.toISOString()}`),l&&(m+=`
Request ID: ${l}`),u){let p=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);p+=`
- ${y}`}m+=p}return`${k}
${m}`}class pe extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class oo extends pe{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function I0({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new pe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new pe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new pe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new pe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new pe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new pe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new pe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(dp(o)){if(i.rp.id!==o)return new pe({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new pe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new pe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function $0({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new pe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(dp(n)){if(r.rpId!==n)return new pe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new pe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class D0{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const L0=new D0;function U0(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=Po(e,["challenge","user","excludeCredentials"]),i=vn(t).buffer,o=Object.assign(Object.assign({},r),{id:vn(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:vn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function M0(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Po(e,["challenge","allowCredentials"]),s=vn(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:vn(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function B0(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Rr(new Uint8Array(e.response.attestationObject)),clientDataJSON:Rr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function z0(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Rr(new Uint8Array(s.authenticatorData)),clientDataJSON:Rr(new Uint8Array(s.clientDataJSON)),signature:Rr(new Uint8Array(s.signature)),userHandle:s.userHandle?Rr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function dp(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function md(){var e,t;return!!(be()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function F0(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new oo("Browser returned unexpected credential type",t)}:{data:null,error:new oo("Empty credential response",t)}}catch(t){return{data:null,error:I0({error:t,options:e})}}}async function W0(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new oo("Browser returned unexpected credential type",t)}:{data:null,error:new oo("Empty credential response",t)}}catch(t){return{data:null,error:$0({error:t,options:e})}}}const V0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},H0={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ao(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const a=n[i];t(a)?n[i]=ao(a,o):n[i]=ao(o)}else n[i]=o}return n}function q0(e,t){return ao(V0,e,t||{})}function K0(e,t){return ao(H0,e,t||{})}class G0{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:a};const l=s??L0.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=q0(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:c,error:d}=await F0({publicKey:u,signal:l});return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=K0(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:c,error:d}=await W0(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(o){return A(o)?{data:null,error:o}:{data:null,error:new Sr("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Os("rpId is required for WebAuthn authentication")};try{if(!md())return{data:null,error:new Sr("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return A(o)?{data:null,error:o}:{data:null,error:new Sr("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Os("rpId is required for WebAuthn registration")};try{if(!md())return{data:null,error:new Sr("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return A(o)?{data:null,error:o}:{data:null,error:new Sr("Unexpected error in register",o)}}}}j0();const J0={url:Hv,storageKey:qv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Kv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function gd(e,t,r){return await r()}const Kr={};class As{get jwks(){var t,r;return(r=(t=Kr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Kr[this.storageKey]=Object.assign(Object.assign({},Kr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Kr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Kr[this.storageKey]=Object.assign(Object.assign({},Kr[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},J0),t);if(this.storageKey=i.storageKey,this.instanceID=(r=As.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,As.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&be()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new R0({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=lp(i.fetch),this.lock=i.lock||gd,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&be()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=T0:this.lock=gd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new G0(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ap()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pd(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=pd(this.memoryStorage)),be()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${sp}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(be()&&(r=a0(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),be()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Xv(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return A(r)?this._returnResult({error:r}):this._returnResult({error:new Sr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:ct}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(A(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:c,password:d,options:f}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Vr(this.storage,this.storageKey)),i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:v},xform:ct})}else if("phone"in t){const{phone:c,password:d,options:f}=t;i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ct})}else throw new mi("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await Se(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await Se(this.storage,`${this.storageKey}-code-verifier`),A(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:hd})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:hd})}else throw new mi("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Wr;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,a,l,u,c,d,f;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:_,wallet:k,statement:m,options:p}=t;let y;if(be())if(typeof k=="object")y=k;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")y=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=k}const x=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href),P=await y.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=cp(P[0]);let b=(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!b){const $=await y.request({method:"eth_chainId"});b=N0($)}const T={domain:x.host,address:C,statement:m,uri:x.href,version:"1",chainId:b,nonce:(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=p==null?void 0:p.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=p==null?void 0:p.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=p==null?void 0:p.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=p==null?void 0:p.signInWithEthereum)===null||c===void 0?void 0:c.resources};g=A0(T),v=await y.request({method:"personal_sign",params:[O0(g),C]})}try{const{data:_,error:k}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ct});if(k)throw k;if(!_||!_.session||!_.user){const m=new Wr;return this._returnResult({data:{user:null,session:null},error:m})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:k})}catch(_){if(A(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(t){var r,n,s,i,o,a,l,u,c,d,f,g;let v,_;if("message"in t)v=t.message,_=t.signature;else{const{chain:k,wallet:m,statement:p,options:y}=t;let x;if(be())if(typeof m=="object")x=m;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))x=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=m}const P=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){const C=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),p?{statement:p}:null));let b;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")b=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)b=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in b&&"signature"in b&&(typeof b.signedMessage=="string"||b.signedMessage instanceof Uint8Array)&&b.signature instanceof Uint8Array)v=typeof b.signedMessage=="string"?b.signedMessage:new TextDecoder().decode(b.signedMessage),_=b.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${P.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(s=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((d=(c=y==null?void 0:y.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...y.signInWithSolana.resources.map(b=>`- ${b}`)]:[]].join(`
`);const C=await x.signMessage(new TextEncoder().encode(v),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=C}}try{const{data:k,error:m}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Rr(_)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ct});if(m)throw m;if(!k||!k.session||!k.user){const p=new Wr;return this._returnResult({data:{user:null,session:null},error:p})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:m})}catch(k){if(A(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const r=await yr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new Zv;const{data:i,error:o}=await L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ct});if(await Se(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Wr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Se(this.storage,`${this.storageKey}-code-verifier`),A(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ct}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new Wr;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Vr(this.storage,this.storageKey));const{error:d}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new mi("You must provide either an email or phone number.")}catch(a){if(await Se(this.storage,`${this.storageKey}-code-verifier`),A(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ct});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(A(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Vr(this.storage,this.storageKey));const u=await L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:b0});return!((i=u.data)===null||i===void 0)&&i.url&&be()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Se(this.storage,`${this.storageKey}-code-verifier`),A(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new qe;const{error:s}=await L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(A(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await L(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await L(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new mi("You must provide either an email or phone number and a type")}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await yr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<pa:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await yr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=ya()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=_0(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Xt}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qe}:await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Xt})})}catch(r){if(A(r))return ma(r)&&(await this._removeSession(),await Se(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new qe;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Vr(this.storage,this.storageKey));const{data:u,error:c}=await L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Xt});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Se(this.storage,`${this.storageKey}-code-verifier`),A(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new qe;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=yi(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(A(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new qe;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!be())throw new gi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new gi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new id("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new id("No code detected.");const{data:p,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new gi("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const g=f-c;g*1e3<=Qr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${d}s`);const v=f-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,c);const{data:_,error:k}=await this._getUser(i);if(k)throw k;const m={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:t.type},error:null})}catch(n){if(A(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await yr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i&&!ma(i))return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(Yv(a)&&(a.status===404||a.status===401||a.status===403)||ma(a)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await Se(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=o0(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Vr(this.storage,this.storageKey,!0));try{return await L(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Se(this.storage,`${this.storageKey}-code-verifier`),A(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:d,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await L(this.fetch,"GET",g,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return be()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(A(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:c}=t,d=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ct}),{data:f,error:g}=d;return g?this._returnResult({data:{user:null,session:null},error:g}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Wr}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:g}))}catch(s){if(await Se(this.storage,`${this.storageKey}-code-verifier`),A(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await L(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await c0(async s=>(s>0&&await u0(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ct})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ga(i)&&Date.now()+o-n<Qr})}catch(n){if(this._debug(r,"error",n),A(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),be()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await yr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await yr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Yr(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:ya()}else if(s&&!s.user&&!s.user){const o=await yr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Se(this.storage,this.storageKey+"-user"),await Yr(this.storage,this.storageKey,s)):s.user=ya()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<pa;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${pa}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ga(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new qe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new No;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new qe;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),A(i)){const o={data:null,error:i};return ga(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Se(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Yr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=cd(s);await Yr(this.storage,this.storageKey,i)}else{const s=cd(r);await Yr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Se(this.storage,this.storageKey),await Se(this.storage,this.storageKey+"-code-verifier"),await Se(this.storage,this.storageKey+"-user"),this.userStorage&&await Se(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&be()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Qr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Qr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Qr}ms, refresh threshold is ${El} ticks`),s<=El&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof up)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!be()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Vr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await L(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await L(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?B0(t.webauthn.credential_response):z0(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await L(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await L(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:U0(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:M0(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,s,i;if(t)try{const{payload:g}=yi(t);let v=null;g.aal&&(v=g.aal);let _=v;const{data:{user:k},error:m}=await this.getUser(t);if(m)return this._returnResult({data:null,error:m});((n=(r=k==null?void 0:k.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(_="aal2");const y=g.amr||[];return{data:{currentLevel:v,nextLevel:_,currentAuthenticationMethods:y},error:null}}catch(g){if(A(g))return this._returnResult({data:null,error:g});throw g}const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=yi(o.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(g=>g.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(c="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await L(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new qe})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new qe});const o=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&be()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(A(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new qe});const o=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&be()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(A(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await L(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new qe})})}catch(t){if(A(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await L(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new qe})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+Jv>s)return n;const{data:i,error:o}=await L(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});n=g.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=yi(n);r!=null&&r.allowExpired||y0(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:i,header:s,signature:o},error:null}}const c=v0(s.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,s0(`${a}.${l}`)))throw new Pl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(A(n))return this._returnResult({data:null,error:n});throw n}}}As.nextInstanceID={};const Q0=As,Y0="2.93.1";let Xn="";typeof Deno<"u"?Xn="deno":typeof document<"u"?Xn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xn="react-native":Xn="node";function X0(){const e=globalThis.process;if(e&&e.platform){const t=e.platform;if(t==="darwin")return"macOS";if(t==="win32")return"Windows";if(t==="linux")return"Linux";if(t==="android")return"Android"}if(typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platform){const t=navigator.userAgentData.platform;if(t==="macOS")return"macOS";if(t==="Windows")return"Windows";if(t==="Linux")return"Linux";if(t==="Android")return"Android";if(t==="iOS")return"iOS"}return null}function Z0(){const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node&&typeof window>"u")try{const r=globalThis.require;if(r)return r("os").release()}catch{return null}}if(typeof Deno<"u"&&Deno.osRelease)try{return Deno.osRelease()}catch{return null}return typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platformVersion?navigator.userAgentData.platformVersion:null}function ew(){if(typeof Deno<"u")return"deno";if(typeof Bun<"u")return"bun";const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return"node"}return null}function tw(){if(typeof Deno<"u"&&Deno.version)return Deno.version.deno;if(typeof Bun<"u"&&Bun.version)return Bun.version;const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return t.node}return null}function rw(){const e={"X-Client-Info":`supabase-js-${Xn}/${Y0}`},t=X0();t&&(e["X-Supabase-Client-Platform"]=t);const r=Z0();r&&(e["X-Supabase-Client-Platform-Version"]=r);const n=ew();n&&(e["X-Supabase-Client-Runtime"]=n);const s=tw();return s&&(e["X-Supabase-Client-Runtime-Version"]=s),e}const nw=rw(),sw={headers:nw},iw={schema:"public"},ow={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aw={};function Is(e){"@babel/helpers - typeof";return Is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Is(e)}function lw(e,t){if(Is(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Is(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uw(e){var t=lw(e,"string");return Is(t)=="symbol"?t:t+""}function cw(e,t,r){return(t=uw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yd(Object(r),!0).forEach(function(n){cw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yd(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const dw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),hw=()=>Headers,fw=(e,t,r)=>{const n=dw(r),s=hw();return async(i,o)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,ce(ce({},o),{},{headers:u}))}};function pw(e){return e.endsWith("/")?e:e+"/"}function mw(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:d}=t,f={db:ce(ce({},l),s),auth:ce(ce({},u),i),realtime:ce(ce({},c),o),storage:{},global:ce(ce(ce({},d),a),{},{headers:ce(ce({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function gw(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pw(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var yw=class extends Q0{constructor(e){super(e)}},vw=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=gw(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:iw,realtime:aw,auth:ce(ce({},ow),{},{storageKey:o}),global:sw},l=mw(r??{},a);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=fw(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(ce({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new Qy(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Vv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Hy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:u},c,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yw({url:this.authUrl.href,headers:ce(ce({},f),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new fv(this.realtimeUrl.href,ce(ce({},e),{},{params:ce(ce({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ww=(e,t,r)=>new vw(e,t,r);function _w(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}_w()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const kw="https://ipmrqyoutrcokvvoboku.supabase.co",xw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlwbXJxeW91dHJjb2t2dm9ib2t1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgyNTQxMjAsImV4cCI6MjA4MzgzMDEyMH0.daO310QCwGFCMhTi8RtTSfuabeaKwWgxA-uJ5DWbeC0",te=ww(kw,xw),hp=S.createContext(null);function Sw({children:e}){const[t,r]=S.useState(null),[n,s]=S.useState(!0);S.useEffect(()=>{let o=!0;(async()=>{const{data:l,error:u}=await te.auth.getSession();if(o){if(u){r(null),s(!1);return}r(l.session),s(!1)}})();const{data:a}=te.auth.onAuthStateChange((l,u)=>{o&&(r(u),s(!1))});return()=>{o=!1,a.subscription.unsubscribe()}},[]);const i=S.useMemo(()=>({session:t,isLoading:n,async signInWithPassword(o,a){const{error:l}=await te.auth.signInWithPassword({email:o,password:a});return l?{error:l.message}:{}},async signOut(){await te.auth.signOut()}}),[n,t]);return Al.createElement(hp.Provider,{value:i},e)}function On(){const e=S.useContext(hp);if(!e)throw new Error("useSupabaseAuth must be used within SupabaseAuthProvider");return e}function An({title:e,subtitle:t,right:r}){const[n,s]=S.useState(!1),i=Ro(),{session:o,signOut:a}=On();return h.jsx("header",{className:"border-b bg-white",children:h.jsxs("div",{className:"mx-auto flex items-center justify-between gap-3 px-4 py-4",children:[h.jsxs("div",{className:"relative flex items-center gap-2",children:[h.jsx("button",{type:"button",onClick:()=>s(l=>!l),"aria-label":"Open menu",className:"rounded-md border border-slate-200 bg-white p-2 text-slate-700 hover:bg-slate-50",children:h.jsxs("div",{className:"grid gap-1",children:[h.jsx("span",{className:"block h-0.5 w-5 bg-slate-700"}),h.jsx("span",{className:"block h-0.5 w-5 bg-slate-700"}),h.jsx("span",{className:"block h-0.5 w-5 bg-slate-700"})]})}),n?h.jsxs("div",{className:"absolute left-0 top-12 z-50 w-64 overflow-hidden rounded-md border border-slate-200 bg-white shadow-lg",children:[h.jsx(wa,{onClick:()=>{s(!1),i("/")},children:"Referral tracker spreadsheet"}),h.jsx(wa,{onClick:()=>{s(!1),i("/reports")},children:"Reports"}),h.jsx(wa,{onClick:()=>{s(!1),i("/notepad")},children:"Notepad"})]}):null,h.jsxs("div",{children:[h.jsx("h1",{className:"text-lg font-semibold",children:e}),t?h.jsx("p",{className:"text-sm text-slate-600",children:t}):null]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[r||null,o?h.jsx("button",{type:"button",onClick:()=>void a(),className:"rounded-md border bg-white px-3 py-2 text-sm hover:bg-slate-50",children:"Logout"}):null]})]})})}function wa({children:e,onClick:t}){return h.jsx("button",{type:"button",onClick:t,className:St("block w-full px-4 py-2 text-left text-sm text-slate-800 hover:bg-slate-50"),children:e})}function bw(e,t){const r=S.useMemo(()=>{try{const o=localStorage.getItem(e);return o?JSON.parse(o):t}catch{return t}},[t,e]),[n,s]=S.useState(r);S.useEffect(()=>{try{const o=localStorage.getItem(e);if(!o){s(t);return}s(JSON.parse(o))}catch{s(t)}},[e,t]);const i=S.useCallback(o=>{s(a=>{const l=typeof o=="function"?o(a):o;try{localStorage.setItem(e,JSON.stringify(l))}catch{}return l})},[e]);return[n,i]}function Ew(){const[e,t]=bw("notepad_v1",""),[r,n]=S.useState(e),[s,i]=S.useState(!1),[o,a]=S.useState(!1);async function l(){try{await navigator.clipboard.writeText(r),i(!0),setTimeout(()=>i(!1),1200)}catch{i(!1)}}function u(){t(r),a(!0),setTimeout(()=>a(!1),1200)}function c(){window.confirm("Clear all notes?")&&(n(""),t(""))}return h.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[h.jsx(An,{title:"Notepad",subtitle:"Use Save to store notes.",right:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{type:"button",onClick:c,className:"rounded-md border bg-white px-3 py-2 text-sm hover:bg-slate-50",children:"Clear All"}),h.jsx("button",{type:"button",onClick:u,className:"rounded-md bg-brand px-3 py-2 text-sm font-medium text-white hover:bg-brand/90",children:o?"Saved":"Save"}),h.jsx("button",{type:"button",onClick:l,className:"rounded-md border bg-white px-3 py-2 text-sm hover:bg-slate-50",children:s?"Copied":"Copy"})]})}),h.jsx("main",{className:"mx-auto px-4 py-6",children:h.jsx("div",{className:"rounded-lg border bg-white",children:h.jsx("textarea",{value:r,onChange:d=>n(d.target.value),rows:18,className:"w-full resize-y rounded-lg bg-white p-4 text-sm outline-none",placeholder:"Write notes here..."})})})]})}const vi=["Colonoscopy and EGD","General Surgery","Spine Neuro Rajamand","Ortho","Ophthalmology","Rajamand Follow Ups","IR Carlevato","Heme Onc Rice","Infusion","Women's Health","Cardio Deschutter","Singh Cancellations","Hernia Sx Waitlist"],Cw=["","Medicare Aetna","Aetna Medicare Advantage","Blue Cross Blue Shield (BCBS)","BCBS Arizona","Cigna","UnitedHealthcare","UnitedHealthcare Medicare Advantage Banner Aetna","Self Pay","Cash Pay","Workers Compensation","Accident / Liability"],Rw=["Colonoscopy Prep","Colonoscopy Consent","EGD Prep","EGD Consent","HIPAA","Forms Sent","Other"];function Pw(e){if(typeof e!="string")return{selected:[],otherText:""};const t=e.split(",").map(i=>i.trim()).filter(Boolean),r=t.find(i=>i.toLowerCase().startsWith("other:")),n=r?r.slice(r.indexOf(":")+1).trim():"",s=t.filter(i=>!i.toLowerCase().startsWith("other:")).map(i=>i.toLowerCase()==="other"?"Other":i);return n&&!s.includes("Other")&&s.push("Other"),{selected:s,otherText:n}}function _a(e,t){const r=Array.from(new Set(e.map(o=>o.trim()).filter(Boolean))),n=r.filter(o=>o!=="Other");if(!r.includes("Other"))return n.join(", ");const s=[...n,"Other"],i=t.trim();return i?[...n,`Other: ${i}`].join(", "):s.join(", ")}function kt(e){if(typeof e!="string"||!e.trim())return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t.toISOString().slice(0,10)}function vd(e){if(typeof e!="string"||!e.trim())return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t.toISOString()}const wi={"Colonoscopy and EGD":[{key:"dateReferralReceived",label:"Date Referral Received",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"phoneNumber",label:"Phone",type:"text"},{key:"insurance",label:"Insurance",type:"text"},{key:"referringProvider",label:"Referral Provider",type:"text"},{key:"reason",label:"Reason",type:"text"},{key:"formsSent",label:"Forms Sent",type:"text"},{key:"formReceived",label:"Form Received",type:"checkbox"},{key:"calledToSchedule",label:"Called to schedule",type:"checkbox"},{key:"prepInstructionSent",label:"Prep Instruction sent",type:"checkbox"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Appt date and time",type:"datetime"},{key:"notes",label:"Notes",type:"text"}],"General Surgery":[{key:"dateReferralReceived",label:"Date Referral Received",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"phoneNumber",label:"Phone",type:"text"},{key:"insurance",label:"Insurance",type:"text"},{key:"referringProvider",label:"Referral Provider",type:"text"},{key:"reason",label:"Reason",type:"text"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Appt date and time",type:"datetime"},{key:"notes",label:"Notes",type:"text"}],"Spine Neuro Rajamand":[{key:"dateReferralReceived",label:"Date Referral Received",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"phoneNumber",label:"Phone",type:"text"},{key:"insurance",label:"Insurance",type:"text"},{key:"referringProvider",label:"Referral Provider",type:"text"},{key:"reason",label:"Reason",type:"text"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Appt date and time",type:"datetime"},{key:"notes",label:"Notes",type:"text"}],Ortho:[{key:"dateReferralReceived",label:"Date Referral Received",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"phoneNumber",label:"Phone",type:"text"},{key:"insurance",label:"Insurance",type:"text"},{key:"referringProvider",label:"Referral Provider",type:"text"},{key:"reason",label:"Reason",type:"text"},{key:"notes",label:"Notes",type:"text"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Appt date and time",type:"datetime"},{key:"notes2",label:"Notes 2",type:"text"}],Ophthalmology:[{key:"dateReferralReceived",label:"Date Referral Received",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"phoneNumber",label:"Phone",type:"text"},{key:"insurance",label:"Insurance",type:"text"},{key:"referringProvider",label:"Referral Provider",type:"text"},{key:"reason",label:"Reason",type:"text"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Appt date and time",type:"datetime"}],"Rajamand Follow Ups":[{key:"dateReferralReceived",label:"Date Referral Received",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"insurance",label:"Insurance",type:"text"},{key:"nextVisit",label:"Next Visit",type:"text"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Scheduled Date/Time",type:"datetime"}],"IR Carlevato":[{key:"dateReferralReceived",label:"Date Referral Received",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"phoneNumber",label:"Phone",type:"text"},{key:"insurance",label:"Insurance",type:"text"},{key:"referringProvider",label:"Referral Provider",type:"text"},{key:"reason",label:"Reason",type:"text"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Appt date and time",type:"datetime"}],"Heme Onc Rice":[{key:"dateReferralReceived",label:"Date Referral Received",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"phoneNumber",label:"Phone",type:"text"},{key:"insurance",label:"Insurance",type:"text"},{key:"ngmPatient",label:"NGM Patient?",type:"checkbox"},{key:"referringProvider",label:"Referral Provider",type:"text"},{key:"reason",label:"Reason",type:"text"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Appt date and time",type:"datetime"},{key:"notes",label:"Notes",type:"text"}],Infusion:[{key:"dateReferralReceived",label:"Date Referral Received",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"phoneNumber",label:"Phone",type:"text"},{key:"insurance",label:"Insurance",type:"text"},{key:"ngmPatient",label:"NGM Patient",type:"checkbox"},{key:"referringProvider",label:"Referral Provider",type:"text"},{key:"reason",label:"Reason",type:"text"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Appt date and time",type:"datetime"},{key:"column1",label:"Column1",type:"text"},{key:"column2",label:"Column2",type:"text"}],"Women's Health":[{key:"dateReferralReceived",label:"Date Referral Received",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"phoneNumber",label:"Phone",type:"text"},{key:"insurance",label:"Insurance",type:"text"},{key:"referringProvider",label:"Referral Provider",type:"text"},{key:"reason",label:"Reason",type:"text"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Appt date and time",type:"datetime"},{key:"notes",label:"Notes",type:"text"}],"Cardio Deschutter":[{key:"dateReferralReceived",label:"Date Referral Received",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"phoneNumber",label:"Phone",type:"text"},{key:"insurance",label:"Insurance",type:"text"},{key:"referringProvider",label:"Referral Provider",type:"text"},{key:"reason",label:"Reason",type:"text"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Appt date and time",type:"datetime"}],"Singh Cancellations":[{key:"needsCall",label:"Needs Call",type:"checkbox"},{key:"dateCancelled",label:"Date Cancelled",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"phoneNumber",label:"Phone",type:"text"},{key:"insurance",label:"Insurance",type:"text"},{key:"reason",label:"Reason",type:"text"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Appt date and time",type:"datetime"},{key:"notes",label:"Notes",type:"text"}],"Hernia Sx Waitlist":[{key:"dateReferralReceived",label:"Date Referral Received",type:"date"},{key:"patientName",label:"Patient Name",type:"text"},{key:"dob",label:"DOB",type:"date"},{key:"phoneNumber",label:"Phone",type:"text"},{key:"insurance",label:"Insurance",type:"text"},{key:"reason",label:"Reason",type:"text"},{key:"firstPatientCommunication",label:"1st Communication",type:"date"},{key:"secondPatientCommunication",label:"2nd Communication",type:"date"},{key:"thirdPatientCommunication",label:"3rd Communication",type:"date"},{key:"apptDateTime",label:"Appt date and time",type:"datetime"}]};function Tw(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")}function jw(e){const t=e.patientName;if(typeof t=="string"&&t.trim())return t.trim();for(const[r,n]of Object.entries(e))if(!(r==="id"||r==="archived")&&r.toLowerCase().includes("patient")&&r.toLowerCase().includes("name")&&typeof n=="string"&&n.trim())return n.trim();return""}function Kn(e){const t={};for(const r of e)t[r.key]=r.type==="checkbox"?!1:"";return t}function ka(e){if(typeof e!="string"||!e.trim())return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:(t.setHours(0,0,0,0),t)}function Gr(e){if(e===!0)return!0;if(typeof e=="number")return e!==0;if(typeof e=="string"){const t=e.trim().toLowerCase();return t==="true"||t==="yes"||t==="y"||t==="1"||t==="x"}return!1}function Nw({}){var ju;const{session:e}=On(),[t,r]=S.useState(vi[0]),n=S.useMemo(()=>wi[t],[t]),[s,i]=S.useState([]),[o,a]=S.useState(!1),[l,u]=S.useState(null),[c,d]=S.useState(null),[f,g]=S.useState([]);S.useEffect(()=>{let w=!0;return(async()=>{const{data:E,error:N}=await te.from("referral_providers").select("id, referral_provider, grp_org_provider").order("referral_provider",{ascending:!0});if(w){if(N){g([]);return}g(E??[])}})(),()=>{w=!1}},[]);function v(w){const E=(w.referral_provider??"").trim(),N=(w.grp_org_provider??"").trim();return N?`${E} - ${N}`:E}function _(w,E){const N={id:String(w.id??""),archived:typeof w.record_status=="string"?w.record_status!=="active":!1};N.referringProviderId=w.referral_provider_id!=null?String(w.referral_provider_id):"";const W={dateReferralReceived:w.date_referral_received,patientName:w.patient_name,dob:w.dob,phoneNumber:w.phone,insurance:w.insurance,referringProvider:w.referral_provider,referringProviderId:w.referral_provider_id!=null?String(w.referral_provider_id):"",reason:w.reason,formsSent:w.forms_sent,formReceived:w.form_received,calledToSchedule:w.called_to_schedule,prepInstructionSent:w.prep_instruction_sent,firstPatientCommunication:w.communication_1,secondPatientCommunication:w.communication_2,thirdPatientCommunication:w.communication_3,apptDateTime:w.appt_date_time,notes:w.notes};for(const I of E){const M=W[I.key];N[I.key]=I.type==="checkbox"?Gr(M):String(M??"")}return N}function k(w,E){const N={id:String(w.id??""),archived:typeof w.record_status=="string"?w.record_status!=="active":!1};N.referringProviderId=w.referral_provider_id!=null?String(w.referral_provider_id):"";const W={dateReferralReceived:w.date_referral_received,patientName:w.patient_name,dob:w.dob,phoneNumber:w.phone,insurance:w.insurance,referringProvider:w.referral_provider,referringProviderId:w.referral_provider_id!=null?String(w.referral_provider_id):"",reason:w.reason,firstPatientCommunication:w.communication_1,secondPatientCommunication:w.communication_2,thirdPatientCommunication:w.communication_3,apptDateTime:w.appt_date_time,notes:w.notes};for(const I of E){const M=W[I.key];N[I.key]=I.type==="checkbox"?Gr(M):String(M??"")}return N}function m(w,E){const N={id:String(w.id??w.uuid??w.row_id??""),archived:w.archived===!0},W=w&&typeof w=="object"&&w.data&&typeof w.data=="object"?w.data:w;W&&"referringProviderId"in W&&(N.referringProviderId=String(W.referringProviderId??""));for(const I of E){const M=W==null?void 0:W[I.key];N[I.key]=I.type==="checkbox"?Gr(M):String(M??"")}return N}S.useEffect(()=>{var N;const w=(N=e==null?void 0:e.user)==null?void 0:N.id;if(!w)return;let E=!0;return a(!0),u(null),(async()=>{const W=t==="Colonoscopy and EGD",I=t==="General Surgery",M=W?te.from("referrals_colonoscopy_egd").select("*").eq("record_status","active"):I?te.from("referrals_general_surgery").select("*"):te.from("referrals").select("id, archived, data, created_at").eq("user_id",w).eq("specialty",t),{data:G,error:F}=await M.order("created_at",{ascending:!1});if(!E)return;if(F){i([]),u(F.message),a(!1);return}const q=(G??[]).map(J=>W?_(J,n):I?k(J,n):m(J,n));i(q),a(!1)})(),()=>{E=!1}},[t,n,(ju=e==null?void 0:e.user)==null?void 0:ju.id]);const[p,y]=S.useState("__all__"),[x,P]=S.useState(""),C=S.useMemo(()=>n.filter(w=>w.type==="date"||w.type==="datetime"),[n]),b=S.useMemo(()=>{const w=C.find(E=>E.key==="dateReferralReceived");return(w==null?void 0:w.key)??"__none__"},[C]),[T,$]=S.useState(b),[D,le]=S.useState(""),[se,Rt]=S.useState("");S.useEffect(()=>{$(w=>w==="__none__"?b:C.some(E=>E.key===w)?w:b)},[C,b]);const[Ve,Mr]=S.useState("__none__"),[Ze,In]=S.useState("asc"),[j,z]=S.useState(!1),[B,X]=S.useState([]),ue=S.useRef(null),[Br,vt]=S.useState([]),mr=S.useRef(null);function Pt(){const w=n.map(q=>q.label),E=n.map(q=>q.key),N=q=>{const J=String(q??""),tt=/[",\n\r]/.test(J),jt=J.replace(/"/g,'""');return tt?`"${jt}"`:jt},W=[w.map(N).join(",")];for(const q of Oo)W.push(E.map(J=>N(q[J])).join(","));const I=`${W.join(`
`)}
`,M=new Blob([I],{type:"text/csv;charset=utf-8;"}),G=URL.createObjectURL(M),F=document.createElement("a");F.href=G,F.download=`${Tw(t)}_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(F),F.click(),F.remove(),URL.revokeObjectURL(G)}const Wt=S.useMemo(()=>{const w=x.trim().toLowerCase(),E=s.filter(F=>F.archived!==!0),N=D?ka(D):null,W=se?ka(se):null,I=W?new Date(W):null;I&&I.setDate(I.getDate()+1);const M=T==="__none__"||!N&&!I?E:E.filter(F=>{const q=ka(F[T]);return!(!q||N&&q<N||I&&q>=I)});if(!w)return M;const G=p==="__all__"?n.map(F=>F.key):[p];return M.filter(F=>{for(const q of G){const J=F[q];if((typeof J=="boolean"?J?"yes":"no":String(J??"")).toLowerCase().includes(w))return!0}return!1})},[s,n,p,x,T,D,se]),Oo=S.useMemo(()=>{if(Ve==="__none__")return Wt;const w=Ze==="asc"?1:-1,E=[...Wt];return E.sort((N,W)=>{const I=N[Ve],M=W[Ve];if(typeof I=="boolean"&&typeof M=="boolean")return I===M?0:I?1*w:-1*w;const G=String(I??"").toLowerCase(),F=String(M??"").toLowerCase();return G===F?0:G<F?-1*w:1*w}),E},[Wt,Ve,Ze]);S.useEffect(()=>{X(w=>w.filter(E=>n.some(N=>N.key===E)))},[n]),S.useEffect(()=>{if(!j)return;function w(E){const N=E.target;N&&(mr.current&&mr.current.contains(N)||z(!1))}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[j]);const[fp,Ao]=S.useState(!1),[He,Io]=S.useState(null),[Vt,Ws]=S.useState(vi[0]),$n=S.useMemo(()=>wi[Vt],[Vt]),[et,wt]=S.useState(()=>Kn(n)),[Vs,Pu]=S.useState(!1),$o=S.useRef(null),Hs=S.useMemo(()=>Vt!=="Colonoscopy and EGD"?{selected:[],otherText:""}:Pw(et.formsSent),[et.formsSent,Vt]);S.useEffect(()=>{if(!Vs)return;function w(E){const N=E.target;N&&($o.current&&$o.current.contains(N)||Pu(!1))}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[Vs]);const Dn=S.useMemo(()=>He?s.find(w=>w.id===He)??null:null,[He,s]);function pp(){d(null),Io(null),Ws(t),wt(Kn(wi[t])),Ao(!0)}function mp(w){d(null);const E=s.find(W=>W.id===w);if(!E)return;Io(w),Ws(t);const N=Kn(n);for(const W of n)N[W.key]=E[W.key];typeof E.referringProviderId=="string"&&(N.referringProviderId=E.referringProviderId),wt(N),Ao(!0)}function Tt(){d(null),Ao(!1),Io(null),Ws(t),wt(Kn(n))}function gp(){var I;const w=(I=e==null?void 0:e.user)==null?void 0:I.id;if(!w)return;d(null);const E={};for(const M of $n)E[M.key]=et[M.key];typeof et.referringProviderId=="string"&&et.referringProviderId.trim()&&(E.referringProviderId=et.referringProviderId);const N=He?t:Vt,W=(Dn==null?void 0:Dn.archived)===!0;(async()=>{const M=N==="Colonoscopy and EGD",G=N==="General Surgery",F=typeof et.referringProviderId=="string"&&et.referringProviderId.trim()?f.find(Pe=>String(Pe.id)===String(et.referringProviderId))??null:null,q=F?v(F):String(E.referringProvider??""),J=F?Number(F.id):null;if(M){const Pe=_a(Hs.selected,Hs.otherText),ye={date_referral_received:kt(E.dateReferralReceived),patient_name:String(E.patientName??""),dob:kt(E.dob),phone:String(E.phoneNumber??""),insurance:String(E.insurance??""),referral_provider:q||null,referral_provider_id:J,reason:String(E.reason??""),forms_sent:Pe||null,form_received:E.formReceived===!0,called_to_schedule:E.calledToSchedule===!0,prep_instruction_sent:E.prepInstructionSent===!0,communication_1:kt(E.firstPatientCommunication),communication_2:kt(E.secondPatientCommunication),communication_3:kt(E.thirdPatientCommunication),appt_date_time:vd(E.apptDateTime),notes:String(E.notes??""),record_status:"active",updated_at:new Date().toISOString()};if(He){const{error:fe}=await te.from("referrals_colonoscopy_egd").update(ye).eq("id",Number(He));if(fe){d(fe.message);return}i(Ae=>Ae.map(Ht=>Ht.id===He?{...Ht,...Object.fromEntries(Object.entries(E).map(([Ln,Uo])=>[Ln,typeof Uo=="boolean"?Uo:String(Uo??"")])),referringProvider:q,referringProviderId:J!=null?String(J):"",formsSent:Pe,archived:!1}:Ht)),Tt();return}const{data:Ue,error:rt}=await te.from("referrals_colonoscopy_egd").insert(ye).select("id").single();if(rt){d(rt.message);return}if((Ue==null?void 0:Ue.id)!=null){const fe={id:String(Ue.id),archived:!1};for(const Ae of $n){const Ht=Ae.key==="formsSent"?Pe:E[Ae.key];fe[Ae.key]=Ae.type==="checkbox"?Gr(Ht):String(Ht??"")}fe.referringProvider=q,fe.referringProviderId=J!=null?String(J):"",N===t&&i(Ae=>[fe,...Ae]),Tt()}return}if(G){const Pe={date_referral_received:kt(E.dateReferralReceived),patient_name:String(E.patientName??""),dob:kt(E.dob),phone:String(E.phoneNumber??""),insurance:String(E.insurance??""),referral_provider:q||null,referral_provider_id:J,reason:String(E.reason??""),communication_1:kt(E.firstPatientCommunication),communication_2:kt(E.secondPatientCommunication),communication_3:kt(E.thirdPatientCommunication),appt_date_time:vd(E.apptDateTime),notes:String(E.notes??""),record_status:"active",updated_at:new Date().toISOString()};if(He){const{error:rt}=await te.from("referrals_general_surgery").update(Pe).eq("id",Number(He));if(rt){d(rt.message);return}i(fe=>fe.map(Ae=>Ae.id===He?{...Ae,...Object.fromEntries(Object.entries(E).map(([Ht,Ln])=>[Ht,typeof Ln=="boolean"?Ln:String(Ln??"")])),referringProvider:q,referringProviderId:J!=null?String(J):"",archived:!1}:Ae)),Tt();return}const{data:ye,error:Ue}=await te.from("referrals_general_surgery").insert(Pe).select("id").single();if(Ue){d(Ue.message);return}if((ye==null?void 0:ye.id)!=null){const rt={id:String(ye.id),archived:!1};for(const fe of $n){const Ae=fe.key==="referringProvider"?q:E[fe.key];rt[fe.key]=fe.type==="checkbox"?Gr(Ae):String(Ae??"")}rt.referringProvider=q,rt.referringProviderId=J!=null?String(J):"",N===t&&i(fe=>[rt,...fe]),Tt()}return}if(He){const{error:Pe}=await te.from("referrals").update({specialty:N,archived:W,data:E,updated_at:new Date().toISOString()}).eq("id",He).eq("user_id",w);if(Pe){d(Pe.message);return}i(ye=>ye.map(Ue=>Ue.id===He?{...Ue,...Object.fromEntries(Object.entries(E).map(([rt,fe])=>[rt,typeof fe=="boolean"?fe:String(fe??"")])),archived:W}:Ue)),Tt();return}const{data:tt,error:jt}=await te.from("referrals").insert({user_id:w,specialty:N,archived:!1,data:E}).select("id").single();if(jt){d(jt.message);return}if(tt!=null&&tt.id){const Pe={id:String(tt.id),archived:!1};for(const ye of $n){const Ue=E[ye.key];Pe[ye.key]=ye.type==="checkbox"?Gr(Ue):String(Ue??"")}N===t&&i(ye=>[Pe,...ye]),Tt()}})()}function yp(w){var N;const E=(N=e==null?void 0:e.user)==null?void 0:N.id;E&&(async()=>{const W=t==="Colonoscopy and EGD",I=t==="General Surgery",{error:M}=W?await te.from("referrals_colonoscopy_egd").update({record_status:"archived",updated_at:new Date().toISOString()}).eq("id",Number(w)):I?await te.from("referrals_general_surgery").update({record_status:"archived",updated_at:new Date().toISOString()}).eq("id",Number(w)):await te.from("referrals").update({archived:!0,updated_at:new Date().toISOString()}).eq("id",w).eq("user_id",E);M||i(G=>G.map(F=>F.id===w?{...F,archived:!0}:F))})()}function qs(w){const E=w.key.toLowerCase(),N=w.label.toLowerCase();return E.includes("notes")||N.includes("notes")}function Do(w){return w.type==="date"}function Lo(w){return w.type==="datetime"}const Ks=S.useMemo(()=>{const w=new Set(B);return n.filter(E=>w.has(E.key)).map(E=>E.key)},[B,n]),Gs=S.useMemo(()=>{if(B.length===0)return n;const w=new Set(B),E=n.filter(W=>w.has(W.key)),N=n.filter(W=>!w.has(W.key));return[...E,...N]},[n,B]);S.useEffect(()=>{if(!ue.current)return;const w=Ks.length;if(w<=0){vt([]);return}const E=Array.from(ue.current.querySelectorAll("thead th[data-col-key]")),N=[];for(let M=0;M<w;M++){const G=E[M];N.push(G?G.getBoundingClientRect().width:0)}const W=[];let I=0;for(let M=0;M<N.length;M++)W.push(I),I+=N[M];vt(W)},[Gs,Ks.length]);function Tu(w,E){if(!(w>=Ks.length))return{position:"sticky",left:Br[w],zIndex:E?30:20,background:"#ffffff"}}return h.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[h.jsx(An,{title:"ReferralTracker",subtitle:t,right:h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",onClick:pp,className:"rounded-md bg-brand px-3 py-2 text-sm font-medium text-white hover:bg-brand/90",children:"Add Referral"}),h.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",children:[h.jsx("div",{className:"grid h-7 w-7 place-items-center rounded-full bg-brand text-xs font-semibold text-white",children:"LN"}),h.jsx("div",{className:"whitespace-nowrap",children:"Lokhi Nalam"})]})]})}),h.jsx("div",{className:"mx-auto border-b bg-white px-4 pb-3",children:h.jsx("div",{className:"flex w-full gap-2 overflow-x-auto pt-3",children:vi.map(w=>{const E=w===t;return h.jsx("button",{type:"button",onClick:()=>r(w),className:St("whitespace-nowrap rounded-full px-3 py-1 text-sm",E?"bg-brand text-white":"bg-white text-slate-800 hover:bg-[rgb(48_158_235/0.08)]"),children:w},w)})})}),h.jsxs("main",{className:"mx-auto px-4 py-6",children:[h.jsxs("div",{className:"mb-3 flex flex-wrap items-end gap-3",children:[h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Search by"}),h.jsxs("select",{value:p,onChange:w=>y(w.target.value),className:"w-[240px] rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2",children:[h.jsx("option",{value:"__all__",children:"All columns"}),n.map(w=>h.jsx("option",{value:w.key,children:w.label},w.key))]})]}),h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Search"}),h.jsx("input",{value:x,onChange:w=>P(w.target.value),className:"w-[320px] rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2",placeholder:"Type to filter rows..."})]}),h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Sort by"}),h.jsxs("select",{value:Ve,onChange:w=>Mr(w.target.value),className:"w-[240px] rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2",children:[h.jsx("option",{value:"__none__",children:"None"}),n.map(w=>h.jsx("option",{value:w.key,children:w.label},w.key))]})]}),h.jsxs("button",{type:"button",onClick:()=>In(w=>w==="asc"?"desc":"asc"),className:"flex items-center gap-2 rounded-md border bg-white px-3 py-2 text-sm hover:bg-slate-50",title:Ze==="asc"?"Ascending":"Descending","aria-label":Ze==="asc"?"Ascending":"Descending",children:[h.jsx("span",{children:Ze==="asc"?"Asc":"Desc"}),h.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:St("h-4 w-4 text-slate-600 transition-transform",Ze==="desc"&&"rotate-180"),children:h.jsx("path",{fillRule:"evenodd",d:"M10 3a.75.75 0 01.75.75v10.69l2.22-2.22a.75.75 0 111.06 1.06l-3.5 3.5a.75.75 0 01-1.06 0l-3.5-3.5a.75.75 0 111.06-1.06l2.22 2.22V3.75A.75.75 0 0110 3z",clipRule:"evenodd"})})]}),h.jsxs("div",{ref:mr,className:"relative",children:[h.jsxs("button",{type:"button",onClick:()=>z(w=>!w),className:"flex items-center gap-2 rounded-md border bg-white px-3 py-2 text-sm hover:bg-slate-50",children:[h.jsx("span",{children:"Freeze Columns"}),h.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:St("h-4 w-4 text-slate-600 transition-transform",j&&"rotate-180"),children:h.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"})})]}),j?h.jsxs("div",{className:"absolute right-0 top-11 z-40 w-[320px] rounded-md border bg-white p-2 shadow-lg",children:[h.jsx("div",{className:"px-2 pb-2 text-xs font-semibold text-slate-700",children:"Select columns (order = freeze order)"}),h.jsx("div",{className:"max-h-[320px] overflow-auto",children:n.map(w=>{const E=B.includes(w.key);return h.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded px-2 py-1 text-sm hover:bg-slate-50",children:[h.jsx("input",{type:"checkbox",checked:E,onChange:N=>{const W=N.target.checked;X(I=>W?I.includes(w.key)?I:[...I,w.key]:I.filter(M=>M!==w.key))}}),h.jsx("span",{className:"flex-1",children:w.label}),E?h.jsxs("span",{className:"text-xs text-slate-500",children:["#",Ks.indexOf(w.key)+1]}):null]},w.key)})}),B.length?h.jsx("button",{type:"button",onClick:()=>X([]),className:"mt-2 w-full rounded-md border bg-white px-3 py-2 text-sm hover:bg-slate-50",children:"Clear frozen columns"}):null]}):null]}),x.trim()?h.jsx("button",{type:"button",onClick:()=>P(""),className:"rounded-md border bg-white px-3 py-2 text-sm hover:bg-slate-50",children:"Clear"}):null,h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Date field"}),h.jsxs("select",{value:T,onChange:w=>$(w.target.value),className:"w-[240px] rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2",children:[h.jsx("option",{value:"__none__",children:"No date filter"}),C.map(w=>h.jsx("option",{value:w.key,children:w.label},w.key))]})]}),h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:"From"}),h.jsx("input",{type:"date",value:D,onChange:w=>le(w.target.value),className:"w-[170px] rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2"})]}),h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:"To"}),h.jsx("input",{type:"date",value:se,onChange:w=>Rt(w.target.value),className:"w-[170px] rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2"})]}),h.jsxs("button",{type:"button",onClick:Pt,className:"flex items-center gap-2 rounded-md border bg-white px-3 py-2 text-sm hover:bg-slate-50",children:[h.jsx("span",{children:"Download"}),h.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-4 text-slate-600",children:h.jsx("path",{fillRule:"evenodd",d:"M10 2.75a.75.75 0 01.75.75v7.69l2.22-2.22a.75.75 0 111.06 1.06l-3.5 3.5a.75.75 0 01-1.06 0l-3.5-3.5a.75.75 0 111.06-1.06l2.22 2.22V3.5a.75.75 0 01.75-.75zM3.5 12.5a.75.75 0 01.75.75v2.25c0 .414.336.75.75.75h10c.414 0 .75-.336.75-.75V13.25a.75.75 0 011.5 0v2.25A2.25 2.25 0 0115.75 17.75h-11A2.25 2.25 0 012.5 15.5v-2.25a.75.75 0 01.75-.75z",clipRule:"evenodd"})})]})]}),h.jsx("div",{className:"rounded-lg border bg-white",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{ref:ue,className:"w-full table-auto border-separate border-spacing-0",children:[h.jsx("thead",{className:"sticky top-0 bg-white",children:h.jsxs("tr",{children:[Gs.map((w,E)=>h.jsx(wd,{dataColKey:w.key,className:St(qs(w)&&"w-[320px] min-w-[320px]",Do(w)&&"w-[140px] max-w-[140px]",Lo(w)&&"w-[190px] max-w-[190px]"),style:Tu(E,!0),children:w.label},w.key)),h.jsx(wd,{className:"w-[160px]",children:"Actions"})]})}),h.jsx("tbody",{children:Oo.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:Gs.length+1,className:"border-t px-4 py-10 text-center text-sm text-slate-600",children:o?"Loading":l||(s.length===0?"No referrals yet. Click Add Referral to create your first row.":"No results found for your search.")})}):Oo.map(w=>h.jsxs("tr",{className:"hover:bg-slate-50",children:[Gs.map((E,N)=>h.jsx(_d,{className:St(E.type==="checkbox"&&"text-center",E.type==="text"&&!qs(E)&&"truncate",qs(E)&&"whitespace-pre-wrap break-words",Do(E)&&"whitespace-nowrap",Lo(E)&&"whitespace-nowrap",qs(E)&&"w-[320px] min-w-[320px]",Do(E)&&"w-[140px] max-w-[140px]",Lo(E)&&"w-[190px] max-w-[190px]"),style:Tu(N,!1),children:E.type==="checkbox"?w[E.key]?"Yes":"":String(w[E.key]??"")},E.key)),h.jsx(_d,{children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{type:"button",onClick:()=>mp(w.id),className:"rounded border px-2 py-1 text-sm hover:bg-white",children:"Edit"}),h.jsx("button",{type:"button",onClick:()=>(()=>{const E=jw(w),N=E?`${E}`:"this referral";window.confirm(`Are you sure you want to archive ${N}?`)&&yp(w.id)})(),className:"rounded border border-slate-200 bg-slate-50 px-2 py-1 text-sm text-slate-700 hover:bg-slate-100",children:"Archive"})]})})]},w.id))})]})})})]}),fp?h.jsxs("div",{className:"fixed inset-0 z-50",children:[h.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:Tt}),h.jsxs("div",{className:"absolute right-0 top-0 h-full w-full max-w-[560px] overflow-y-auto bg-white shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between border-b px-4 py-3",children:[h.jsx("div",{children:h.jsx("div",{className:"text-sm font-semibold",children:Dn?"Edit Referral":"Add Referral"})}),h.jsx("button",{type:"button",onClick:Tt,className:"rounded px-2 py-1 text-sm hover:bg-slate-100",children:"Close"})]}),h.jsxs("div",{className:"grid gap-4 px-4 py-4",children:[Dn?null:h.jsx(kd,{title:"Table",children:h.jsx(xa,{label:"Add to",value:Vt,options:vi,onChange:w=>{Ws(w),wt(Kn(wi[w]))}})}),h.jsx(kd,{title:"Details",children:$n.map(w=>{const E=et[w.key],N=/referringprovider/i.test(w.key)||/referral\s*provider/i.test(w.label);if(Vt==="Colonoscopy and EGD"&&(w.key==="formReceived"||w.key==="calledToSchedule"||w.key==="prepInstructionSent"))return null;if(N){const I=typeof et.referringProviderId=="string"?et.referringProviderId:"",M=["",...f.map(G=>String(G.id))];return h.jsx(xa,{label:w.label,value:I,options:M,optionLabel:G=>{if(!G)return"";const F=f.find(q=>String(q.id)===String(G));return F?v(F):G},onChange:G=>{const F=G?f.find(q=>String(q.id)===String(G))??null:null;wt(q=>({...q,referringProviderId:G,referringProvider:F?v(F):""}))}},w.key)}if(Vt==="Colonoscopy and EGD"&&w.key==="formsSent"){const I=Hs.selected,M=Hs.otherText,G=I.length===0?"Select":I.includes("Other")?`Selected (${I.length})`:I.join(", ");return h.jsxs("div",{className:"grid gap-1",children:[h.jsx("div",{className:"text-xs font-medium text-slate-700",children:w.label}),h.jsxs("div",{ref:$o,className:"relative",children:[h.jsxs("button",{type:"button",onClick:()=>Pu(F=>!F),className:"flex w-full items-center justify-between rounded-md border bg-white px-3 py-2 text-sm text-slate-800 outline-none ring-slate-200 hover:bg-slate-50 focus:ring-2",children:[h.jsx("span",{className:"truncate",children:G}),h.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:St("h-4 w-4 text-slate-600 transition-transform",Vs&&"rotate-180"),children:h.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"})})]}),Vs?h.jsx("div",{className:"absolute left-0 top-11 z-40 w-full rounded-md border bg-white p-2 shadow-lg",children:h.jsx("div",{className:"grid gap-2",children:Rw.map(F=>{const q=I.includes(F);return h.jsxs("div",{className:"grid gap-2 rounded px-2 py-1 hover:bg-slate-50",children:[h.jsxs("label",{className:"flex cursor-pointer items-center gap-2 text-sm text-slate-800",children:[h.jsx("input",{type:"checkbox",checked:q,onChange:J=>{const tt=J.target.checked,jt=tt?Array.from(new Set([...I,F])):I.filter(ye=>ye!==F),Pe=F==="Other"&&!tt?"":M;wt(ye=>({...ye,formsSent:_a(jt,Pe)}))},className:"h-4 w-4 rounded border-slate-300"}),h.jsx("span",{children:F})]}),F==="Other"&&q?h.jsx("input",{type:"text",value:M,onChange:J=>{const tt=J.target.value;wt(jt=>({...jt,formsSent:_a(I,tt)}))},placeholder:"Enter other...",className:"w-full rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2"}):null]},F)})})}):null]})]},w.key)}return w.type==="checkbox"?h.jsx(Aw,{label:w.label,checked:E===!0,onChange:I=>wt(M=>({...M,[w.key]:I}))},w.key):/insurance/i.test(w.key)||/insurance/i.test(w.label)?h.jsx(xa,{label:w.label,value:typeof E=="string"?E:"",options:Cw,onChange:I=>wt(M=>({...M,[w.key]:I}))},w.key):h.jsx(Ow,{label:w.label,type:w.type==="date"?"date":w.type==="datetime"?"datetime-local":"text",value:typeof E=="string"?E:"",onChange:I=>wt(M=>({...M,[w.key]:I}))},w.key)})}),c?h.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-800",children:c}):null,h.jsxs("div",{className:"flex items-center justify-end gap-2 border-t pt-4",children:[h.jsx("button",{type:"button",onClick:Tt,className:"rounded-md border px-3 py-2 text-sm hover:bg-slate-50",children:"Cancel"}),h.jsx("button",{type:"button",onClick:gp,className:"rounded-md bg-brand px-3 py-2 text-sm font-medium text-white hover:bg-brand/90",children:"Save"})]})]})]})]}):null]})}function xa({label:e,value:t,options:r,optionLabel:n,onChange:s}){return h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:e}),h.jsx("select",{value:t,onChange:i=>s(i.target.value),className:"w-full rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2",children:r.map(i=>h.jsx("option",{value:i,children:n?n(i):i},i))})]})}function wd({children:e,className:t,style:r,dataColKey:n}){return h.jsx("th",{style:r,"data-col-key":n,className:St("border-b px-3 py-2 text-left text-xs font-semibold text-slate-700",t),children:e})}function _d({children:e,className:t,style:r}){return h.jsx("td",{style:r,className:St("border-b px-3 py-2 align-top text-sm text-slate-800",t),children:e})}function kd({title:e,children:t}){return h.jsxs("section",{className:"grid gap-3 rounded-md border bg-slate-50 p-3",children:[h.jsx("div",{className:"text-xs font-semibold text-slate-700",children:e}),h.jsx("div",{className:"grid gap-3",children:t})]})}function Ow({label:e,type:t,value:r,onChange:n}){const s=/phone/i.test(e);return h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:e}),h.jsx("input",{type:s?"tel":t??"text",inputMode:s?"numeric":void 0,pattern:s?"[0-9]*":void 0,maxLength:s?10:void 0,value:r,onChange:i=>{const o=i.target.value;n(s?o.replace(/\D+/g,"").slice(0,10):o)},className:"w-full rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2"})]})}function Aw({label:e,checked:t,onChange:r}){return h.jsxs("label",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",checked:t,onChange:n=>r(n.target.checked),className:"h-4 w-4 rounded border-slate-300"}),h.jsx("span",{className:"text-sm text-slate-800",children:e})]})}const xd=["Colonoscopy and EGD","General Surgery","Spine Neuro Rajamand","Ortho","Ophthalmology","Rajamand Follow Ups","IR Carlevato","Heme Onc Rice","Infusion","Women's Health","Cardio Deschutter","Singh Cancellations","Hernia Sx Waitlist"];function Ii(e){return typeof e=="string"&&e.trim().length>0}function _i(e){if(!Ii(e))return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:(t.setHours(0,0,0,0),t)}function Iw(e){const t=new Date(e);t.setHours(0,0,0,0);const n=(t.getDay()+6)%7;return t.setDate(t.getDate()-n),t}function $w(e){const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function Dw(e){const t=Ii(e.firstPatientCommunication),r=Ii(e.secondPatientCommunication),n=Ii(e.thirdPatientCommunication);return t&&r&&n?"all_three":t&&r?"first_second":t?"first_only":"none"}function Lw(){var C;const{session:e}=On(),[t,r]=S.useState("__all__"),[n,s]=S.useState(""),[i,o]=S.useState(""),[a,l]=S.useState([]),[u,c]=S.useState(!1),[d,f]=S.useState(null);S.useEffect(()=>{var $;const b=($=e==null?void 0:e.user)==null?void 0:$.id;if(!b)return;let T=!0;return c(!0),f(null),(async()=>{const{data:D,error:le}=await te.from("referrals").select("specialty, data").eq("user_id",b).eq("archived",!1);if(!T)return;if(le){l([]),f(le.message),c(!1);return}const se=new Set(xd),Rt=(D??[]).map(Ve=>{const Mr=String(Ve.specialty);if(!se.has(Mr))return null;const Ze=Ve.data??{};return{specialty:Mr,row:Ze}}).filter(Ve=>Ve!==null);l(Rt),c(!1)})(),()=>{T=!1}},[(C=e==null?void 0:e.user)==null?void 0:C.id]);const g=S.useMemo(()=>{const b=n?_i(n):null,T=i?_i(i):null,$=T?new Date(T):null;return $&&$.setDate($.getDate()+1),a.filter(({specialty:D,row:le})=>{if(t!=="__all__"&&D!==t)return!1;if(!b&&!$)return!0;const se=_i(le.dateReferralReceived);return!(!se||b&&se<b||$&&se>=$)})},[a,n,i,t]),v=g.length,_=S.useMemo(()=>{const b={};for(const{specialty:T}of g)b[T]=(b[T]??0)+1;return b},[g]),k=S.useMemo(()=>{let b=0,T=0,$=0,D=0;for(const{row:le}of g){const se=Dw(le);se==="all_three"?$++:se==="first_second"?T++:se==="first_only"?b++:D++}return{firstOnly:b,firstSecond:T,allThree:$,none:D}},[g]),m=k.firstOnly+k.firstSecond+k.allThree,p=S.useMemo(()=>{const b=Object.entries(_);return b.sort((T,$)=>$[1]-T[1]),b},[_]);S.useMemo(()=>{let b=0;for(const[,T]of p)b=Math.max(b,T);return b},[p]);const y=S.useMemo(()=>{const b={};for(const{row:$}of g){const D=_i($.dateReferralReceived);if(!D)continue;const le=Iw(D),se=$w(le);b[se]=(b[se]??0)+1}const T=Object.entries(b);return T.sort(($,D)=>$[0].localeCompare(D[0])),T},[g]),x=S.useMemo(()=>{let b=0;for(const[,T]of y)b=Math.max(b,T);return b},[y]),P=S.useMemo(()=>[{key:"first_only",label:"1st only",value:k.firstOnly},{key:"first_second",label:"1st + 2nd",value:k.firstSecond},{key:"all_three",label:"All 3",value:k.allThree}],[k.allThree,k.firstOnly,k.firstSecond]);return h.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[h.jsx(An,{title:"Reports",subtitle:"Referral tracking metrics"}),h.jsxs("main",{className:"mx-auto px-4 py-6",children:[d?h.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-800",children:d}):null,u?h.jsx("div",{className:"mb-4 text-sm text-slate-700",children:"Loading"}):null,h.jsxs("div",{className:"grid gap-4",children:[h.jsxs("div",{className:"rounded-lg border bg-white p-4",children:[h.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[h.jsx(Vw,{label:"Table",value:t,options:["__all__",...xd],optionLabel:b=>b==="__all__"?"All tables":b,onChange:b=>r(b)}),h.jsx(bd,{label:"From",type:"date",value:n,onChange:b=>s(b)}),h.jsx(bd,{label:"To",type:"date",value:i,onChange:b=>o(b)})]}),h.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:["Date filter uses the ",h.jsx("span",{className:"font-semibold",children:"Date Referral Received"})," ","field. Rows without a valid date are excluded when a date range is set."]})]}),h.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[h.jsx(Sa,{title:"Total referrals",value:v}),h.jsx(Sa,{title:"Referrals with 1st comm started",value:m,subtitle:v?`${Math.round(m/v*100)}%`:"0%"}),h.jsx(Sa,{title:"All 3 comms completed",value:k.allThree,subtitle:m?`${Math.round(k.allThree/m*100)}% of started`:"0% of started"})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs("div",{className:"rounded-lg border bg-white p-4",children:[h.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Referrals by category"}),p.length===0?h.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"No rows match your filters."}):h.jsx("div",{className:"mt-3",children:h.jsx(Uw,{items:p.map(([b,T])=>({label:b,value:T})),height:260})})]}),h.jsxs("div",{className:"rounded-lg border bg-white p-4",children:[h.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Communication completion ratio"}),m===0?h.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"No rows match your filters."}):h.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-[220px_1fr] md:items-center",children:[h.jsx(zw,{items:P,size:200}),h.jsx(Fw,{items:P,total:m})]}),h.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:["Ratios are calculated out of rows that have at least the ",h.jsx("span",{className:"font-semibold",children:"1st"})," ","patient communication date."]})]})]}),h.jsxs("div",{className:"rounded-lg border bg-white p-4",children:[h.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Week-by-week trend"}),h.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Grouped by ",h.jsx("span",{className:"font-semibold",children:"Monday-starting weeks"}),", based on Date Referral Received."]}),y.length===0?h.jsx("div",{className:"mt-3 text-sm text-slate-600",children:"No rows with valid dates match your filters."}):h.jsx("div",{className:"mt-3",children:h.jsx(Bw,{points:y.map(([b,T])=>({xLabel:b,y:T})),height:260,yMax:x})})]})]})]})]})}function Sa({title:e,value:t,subtitle:r}){return h.jsxs("div",{className:"rounded-lg border bg-white p-4",children:[h.jsx("div",{className:"text-xs font-semibold text-slate-600",children:e}),h.jsx("div",{className:"mt-1 text-3xl font-semibold text-slate-900",children:t}),r?h.jsx("div",{className:"mt-1 text-xs text-slate-600",children:r}):null]})}function Uw({items:e,height:t}){const n={top:16,right:16,bottom:38,left:40},s=720-n.left-n.right,i=t-n.top-n.bottom,o=e.reduce((c,d)=>Math.max(c,d.value),0),a=e.slice(0,12),l=a.length?s/a.length:s,u=Math.max(6,l*.62);return h.jsxs("svg",{viewBox:`0 0 720 ${t}`,className:"w-full",children:[h.jsx("rect",{x:"0",y:"0",width:720,height:t,fill:"white"}),h.jsx("line",{x1:n.left,y1:n.top+i,x2:n.left+s,y2:n.top+i,stroke:"#e2e8f0"}),h.jsx("line",{x1:n.left,y1:n.top,x2:n.left,y2:n.top+i,stroke:"#e2e8f0"}),a.map((c,d)=>{const f=n.left+d*l+(l-u)/2,g=o>0?c.value/o*i:0,v=n.top+i-g;return h.jsxs("g",{children:[h.jsx("rect",{x:f,y:v,width:u,height:g,fill:Cn[d%Cn.length],rx:4}),h.jsx("text",{x:f+u/2,y:n.top+i+18,textAnchor:"middle",fontSize:"10",fill:"#64748b",children:Mw(c.label)})]},c.label)})]})}function Mw(e){return e.length<=10?e:`${e.slice(0,10)}`}function Bw({points:e,height:t,yMax:r}){const s={top:16,right:16,bottom:40,left:40},i=720-s.left-s.right,o=t-s.top-s.bottom,a=Math.max(1,r),l=e.map((g,v)=>s.left+(e.length<=1?i/2:v/(e.length-1)*i)),u=e.map(g=>s.top+o-g.y/a*o),c=e.map((g,v)=>`${v===0?"M":"L"} ${l[v]} ${u[v]}`).join(" "),d=Math.min(6,e.length),f=d<=1?[0]:Array.from({length:d},(g,v)=>{const _=v/(d-1);return Math.round(_*(e.length-1))});return h.jsxs("svg",{viewBox:`0 0 720 ${t}`,className:"w-full",children:[h.jsx("rect",{x:"0",y:"0",width:720,height:t,fill:"white"}),h.jsx("line",{x1:s.left,y1:s.top+o,x2:s.left+i,y2:s.top+o,stroke:"#e2e8f0"}),h.jsx("line",{x1:s.left,y1:s.top,x2:s.left,y2:s.top+o,stroke:"#e2e8f0"}),h.jsx("path",{d:c,fill:"none",stroke:Sd,strokeWidth:3}),e.map((g,v)=>h.jsx("circle",{cx:l[v],cy:u[v],r:4,fill:Sd},g.xLabel)),f.map(g=>h.jsx("text",{x:l[g],y:s.top+o+20,textAnchor:"middle",fontSize:"10",fill:"#64748b",children:e[g].xLabel.slice(5)},e[g].xLabel))]})}const Cn=["#C5D6FB","#6391F4","#3C76F1","#366AD9"],Sd="#3C76F1";function zw({items:e,size:t}){const r=e.reduce((c,d)=>c+d.value,0),n=t/2,s=n-6,i=s*.62,o=n,a=n;let l=-Math.PI/2;const u=e.filter(c=>c.value>0).map((c,d)=>{const f=r>0?c.value/r*Math.PI*2:0,g=l,v=l+f;return l=v,{...c,start:g,end:v,color:Cn[d%Cn.length]}});return h.jsxs("svg",{width:t,height:t,viewBox:`0 0 ${t} ${t}`,children:[u.map(c=>h.jsx("path",{d:Ww(o,a,s,i,c.start,c.end),fill:c.color},c.key)),h.jsx("circle",{cx:o,cy:a,r:i-1,fill:"white"}),h.jsx("text",{x:o,y:a-2,textAnchor:"middle",fontSize:"18",fill:"#0f172a",fontWeight:"600",children:r}),h.jsx("text",{x:o,y:a+16,textAnchor:"middle",fontSize:"10",fill:"#64748b",children:"referrals"})]})}function Fw({items:e,total:t}){return h.jsx("div",{className:"grid gap-2",children:e.map((r,n)=>{const s=t>0?Math.round(r.value/t*100):0;return h.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-md border px-3 py-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"inline-block h-3 w-3 rounded",style:{background:Cn[n%Cn.length]}}),h.jsx("span",{className:"text-sm text-slate-800",children:r.label})]}),h.jsxs("span",{className:"text-sm font-medium text-slate-700",children:[r.value," (",s,"%)"]})]},r.key)})})}function ki(e,t,r,n){return{x:e+r*Math.cos(n),y:t+r*Math.sin(n)}}function Ww(e,t,r,n,s,i){const o=i-s>Math.PI?1:0,a=ki(e,t,r,s),l=ki(e,t,r,i),u=ki(e,t,n,i),c=ki(e,t,n,s);return[`M ${a.x} ${a.y}`,`A ${r} ${r} 0 ${o} 1 ${l.x} ${l.y}`,`L ${u.x} ${u.y}`,`A ${n} ${n} 0 ${o} 0 ${c.x} ${c.y}`,"Z"].join(" ")}function Vw({label:e,value:t,options:r,optionLabel:n,onChange:s}){return h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:e}),h.jsx("select",{value:t,onChange:i=>s(i.target.value),className:St("w-full rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2"),children:r.map(i=>h.jsx("option",{value:i,children:n?n(i):i},i))})]})}function bd({label:e,type:t,value:r,onChange:n}){return h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:e}),h.jsx("input",{type:t??"text",value:r,onChange:s=>n(s.target.value),className:"w-full rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2"})]})}function Hw(){const e=Ro(),[t,r]=S.useState(null);return S.useEffect(()=>{let n=!0;return(async()=>{try{const s=new URL(window.location.href),i=s.searchParams.get("code"),o=s.searchParams.get("token_hash"),a=s.searchParams.get("token"),l=s.searchParams.get("type");if(i){const{error:u}=await te.auth.exchangeCodeForSession(window.location.href);if(!n)return;if(u){r(u.message);return}}else if((o||a)&&l){const{data:u,error:c}=await te.auth.verifyOtp({token_hash:o??a??"",type:l});if(!n)return;if(c){r(c.message);return}if(u!=null&&u.session){const{error:d}=await te.auth.setSession({access_token:u.session.access_token,refresh_token:u.session.refresh_token});if(!n)return;if(d){r(d.message);return}}}else{const u=(s.hash??"").replace(/^#/,""),c=new URLSearchParams(u),d=c.get("access_token"),f=c.get("refresh_token");if(!d||!f){r("No auth code or recovery tokens found in callback URL. Make sure your Supabase redirect URL points to /auth/callback.");return}const{error:g}=await te.auth.setSession({access_token:d,refresh_token:f});if(!n)return;if(g){r(g.message);return}}if(!n)return;e("/set-password",{replace:!0})}catch(s){if(!n)return;r(s instanceof Error?s.message:"Auth callback failed")}})(),()=>{n=!1}},[e]),h.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[h.jsx(An,{title:"ReferralTracker",subtitle:"Signing you in"}),h.jsx("main",{className:"mx-auto max-w-[520px] px-4 py-10",children:t?h.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-800",children:t}):h.jsx("div",{className:"text-sm text-slate-700",children:"Completing sign-in"})})]})}function qw(){var _;const{session:e,isLoading:t}=On(),r=Ro(),n=S.useMemo(()=>{var k;return((k=e==null?void 0:e.user)==null?void 0:k.email)??""},[(_=e==null?void 0:e.user)==null?void 0:_.email]),[s,i]=S.useState(""),[o,a]=S.useState(""),[l,u]=S.useState(null),[c,d]=S.useState(null),[f,g]=S.useState(!1);async function v(){if(u(null),d(null),!s||s.length<8){u("Password must be at least 8 characters");return}if(s!==o){u("Passwords do not match");return}g(!0);try{const{error:k}=await te.auth.updateUser({password:s});if(k){u(k.message);return}d("Password updated successfully. Redirecting"),window.setTimeout(()=>{r("/",{replace:!0})},800)}finally{g(!1)}}return h.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[h.jsx(An,{title:"ReferralTracker",subtitle:"Set password"}),h.jsx("main",{className:"mx-auto flex max-w-[520px] flex-col gap-4 px-4 py-10",children:h.jsxs("div",{className:"rounded-lg border bg-white p-5",children:[h.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Set your password"}),h.jsx("div",{className:"mt-1 text-xs text-slate-600",children:n?`Signed in as ${n}.`:"Signed in."}),e?h.jsxs("div",{className:"mt-4 grid gap-3",children:[h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:"New password"}),h.jsx("input",{value:s,onChange:k=>i(k.target.value),type:"password",autoComplete:"new-password",className:"w-full rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2"})]}),h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Confirm password"}),h.jsx("input",{value:o,onChange:k=>a(k.target.value),type:"password",autoComplete:"new-password",className:"w-full rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2"})]}),l?h.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-800",children:l}):null,c?h.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:c}):null,h.jsx("button",{type:"button",onClick:v,disabled:!e||f||t,className:"rounded-md bg-brand px-3 py-2 text-sm font-medium text-white hover:bg-brand/90 disabled:cursor-not-allowed disabled:opacity-50",children:f?"Saving":"Set password"})]}):h.jsx("div",{className:"mt-4 text-sm text-slate-700",children:"You need to be signed in to set a password."})]})})]})}function Kw(){return h.jsxs(Uy,{children:[h.jsx(_r,{path:"/auth/callback",element:h.jsx(Hw,{})}),h.jsx(_r,{path:"/set-password",element:h.jsx(qw,{})}),h.jsx(_r,{path:"/",element:h.jsx(Nw,{})}),h.jsx(_r,{path:"/reports",element:h.jsx(Lw,{})}),h.jsx(_r,{path:"/notepad",element:h.jsx(Ew,{})}),h.jsx(_r,{path:"*",element:h.jsx(Dy,{to:"/",replace:!0})})]})}function Gw(){const{signInWithPassword:e,isLoading:t}=On(),[r,n]=S.useState(""),[s,i]=S.useState(""),[o,a]=S.useState(null),[l,u]=S.useState(null),[c,d]=S.useState(!1),[f,g]=S.useState("sign_in");async function v(){a(null),u(null),d(!0);try{if(f==="forgot"){const k=r.trim();if(!k){a("Email is required");return}const{error:m}=await te.auth.resetPasswordForEmail(k,{redirectTo:"http://localhost:5173/auth/callback"});if(m){a(m.message);return}u("Password reset email sent. Check your inbox.");return}const _=await e(r.trim(),s);_.error&&a(_.error)}finally{d(!1)}}return h.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[h.jsx(An,{title:"ReferralTracker",subtitle:"Sign in"}),h.jsxs("main",{className:"mx-auto flex max-w-[520px] flex-col gap-4 px-4 py-10",children:[h.jsxs("div",{className:"rounded-lg border bg-white p-5",children:[h.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Sign in"}),h.jsx("div",{className:"mt-1 text-xs text-slate-600",children:f==="forgot"?"Enter your email to reset your password.":"Use your email and password."}),h.jsxs("div",{className:"mt-4 grid gap-3",children:[h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Email"}),h.jsx("input",{value:r,onChange:_=>n(_.target.value),type:"email",autoComplete:"email",className:"w-full rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2"})]}),f==="sign_in"?h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Password"}),h.jsx("input",{value:s,onChange:_=>i(_.target.value),type:"password",autoComplete:"current-password",className:"w-full rounded-md border bg-white px-3 py-2 text-sm outline-none ring-slate-200 focus:ring-2"})]}):null,f==="sign_in"?h.jsx("button",{type:"button",onClick:()=>{g("forgot"),a(null),u(null)},className:"justify-self-start text-xs font-medium text-slate-700 underline",children:"Forgot password?"}):h.jsx("button",{type:"button",onClick:()=>{g("sign_in"),a(null),u(null)},className:"justify-self-start text-xs font-medium text-slate-700 underline",children:"Back to sign in"}),o?h.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-800",children:o}):null,l?h.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:l}):null,h.jsx("button",{type:"button",onClick:v,disabled:c||t||!r.trim()||f==="sign_in"&&!s,className:"rounded-md bg-brand px-3 py-2 text-sm font-medium text-white hover:bg-brand/90 disabled:cursor-not-allowed disabled:opacity-50",children:f==="forgot"?c?"Sending":"Send reset email":c?"Signing in":"Sign in"})]})]}),h.jsxs("div",{className:"text-xs text-slate-600",children:["If you dont have an account yet, contact admin:"," ",h.jsx("a",{className:"underline",href:"mailto:lokhi.nalam@covergencehealth.com",children:"lokhi.nalam@covergencehealth.com"})]})]})]})}function Jw({children:e}){const{session:t,isLoading:r}=On(),s=Co().pathname==="/auth/callback";return r?h.jsx("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:h.jsx("div",{className:"mx-auto max-w-[520px] px-4 py-10 text-sm text-slate-700",children:"Loading"})}):t?h.jsx(h.Fragment,{children:e}):s?h.jsx(h.Fragment,{children:e}):h.jsx(Gw,{})}ba.createRoot(document.getElementById("root")).render(h.jsx(Al.StrictMode,{children:h.jsx(Sw,{children:h.jsx(zy,{children:h.jsx(Jw,{children:h.jsx(Kw,{})})})})}));
